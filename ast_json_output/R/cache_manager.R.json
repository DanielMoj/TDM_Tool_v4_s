[
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "LRUCache"
      },
      {
        "type": "call",
        "fun": ["::", "R6", "R6Class"],
        "args": {
          "1": {
            "type": "literal",
            "value": "LRUCache"
          },
          "private": {
            "type": "call",
            "fun": "list",
            "args": {
              ".cache": {
                "type": "NULL",
                "value": []
              },
              ".access_times": {
                "type": "NULL",
                "value": []
              },
              ".access_counts": {
                "type": "NULL",
                "value": []
              },
              ".model_sizes": {
                "type": "NULL",
                "value": []
              },
              ".max_size": {
                "type": "literal",
                "value": 10
              },
              ".total_memory": {
                "type": "literal",
                "value": 0
              },
              "get_object_size": {
                "type": "call",
                "fun": "function",
                "args": [
                  {
                    "type": "pairlist",
                    "value": ""
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "tryCatch",
                        "args": {
                          "1": {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "as.numeric",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "object.size",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "obj"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          "error": {
                            "type": "call",
                            "fun": "function",
                            "args": [
                              {
                                "type": "pairlist",
                                "value": ""
                              },
                              {
                                "type": "call",
                                "fun": "{",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": 0
                                  }
                                ]
                              },
                              {
                                "type": "NULL",
                                "value": []
                              }
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "NULL",
                    "value": []
                  }
                ]
              },
              "evict_lru": {
                "type": "call",
                "fun": "function",
                "args": [
                  {
                    "type": "NULL",
                    "value": []
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "if",
                        "args": [
                          {
                            "type": "call",
                            "fun": "==",
                            "args": [
                              {
                                "type": "call",
                                "fun": "length",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "ls",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "private"
                                          },
                                          {
                                            "type": "name",
                                            "value": ".cache"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "literal",
                                "value": 0
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "return",
                            "args": [
                              {
                                "type": "call",
                                "fun": "invisible",
                                "args": [
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "keys"
                          },
                          {
                            "type": "call",
                            "fun": "ls",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "private"
                                  },
                                  {
                                    "type": "name",
                                    "value": ".cache"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "access_times"
                          },
                          {
                            "type": "call",
                            "fun": "sapply",
                            "args": [
                              {
                                "type": "name",
                                "value": "keys"
                              },
                              {
                                "type": "call",
                                "fun": "function",
                                "args": [
                                  {
                                    "type": "pairlist",
                                    "value": ""
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "if",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "exists",
                                            "args": {
                                              "1": {
                                                "type": "name",
                                                "value": "k"
                                              },
                                              "envir": {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "private"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": ".access_times"
                                                  }
                                                ]
                                              }
                                            }
                                          },
                                          {
                                            "type": "call",
                                            "fun": "{",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "get",
                                                "args": {
                                                  "1": {
                                                    "type": "name",
                                                    "value": "k"
                                                  },
                                                  "envir": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "private"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": ".access_times"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "{",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": 0
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "lru_key"
                          },
                          {
                            "type": "call",
                            "fun": "[",
                            "args": [
                              {
                                "type": "name",
                                "value": "keys"
                              },
                              {
                                "type": "call",
                                "fun": "which.min",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "access_times"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "message",
                        "args": [
                          {
                            "type": "call",
                            "fun": "sprintf",
                            "args": [
                              {
                                "type": "literal",
                                "value": "Evicting cached model: %s (last accessed: %s, size: %.2f MB)"
                              },
                              {
                                "type": "name",
                                "value": "lru_key"
                              },
                              {
                                "type": "call",
                                "fun": "format",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "as.POSIXct",
                                    "args": {
                                      "1": {
                                        "type": "call",
                                        "fun": "[",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "access_times"
                                          },
                                          {
                                            "type": "name",
                                            "value": "lru_key"
                                          }
                                        ]
                                      },
                                      "origin": {
                                        "type": "literal",
                                        "value": "1970-01-01"
                                      }
                                    }
                                  },
                                  {
                                    "type": "literal",
                                    "value": "%Y-%m-%d %H:%M:%S"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "/",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "[[",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "private"
                                          },
                                          {
                                            "type": "name",
                                            "value": ".model_sizes"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "name",
                                        "value": "lru_key"
                                      }
                                    ]
                                  },
                                  {
                                    "type": "call",
                                    "fun": "^",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": 1024
                                      },
                                      {
                                        "type": "literal",
                                        "value": 2
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".total_memory"
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "private"
                                  },
                                  {
                                    "type": "name",
                                    "value": ".total_memory"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "[[",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "private"
                                      },
                                      {
                                        "type": "name",
                                        "value": ".model_sizes"
                                      }
                                    ]
                                  },
                                  {
                                    "type": "name",
                                    "value": "lru_key"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "rm",
                        "args": {
                          "list": {
                            "type": "name",
                            "value": "lru_key"
                          },
                          "envir": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".cache"
                              }
                            ]
                          }
                        }
                      },
                      {
                        "type": "call",
                        "fun": "rm",
                        "args": {
                          "list": {
                            "type": "name",
                            "value": "lru_key"
                          },
                          "envir": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".access_times"
                              }
                            ]
                          }
                        }
                      },
                      {
                        "type": "call",
                        "fun": "rm",
                        "args": {
                          "list": {
                            "type": "name",
                            "value": "lru_key"
                          },
                          "envir": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".access_counts"
                              }
                            ]
                          }
                        }
                      },
                      {
                        "type": "call",
                        "fun": "rm",
                        "args": {
                          "list": {
                            "type": "name",
                            "value": "lru_key"
                          },
                          "envir": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".model_sizes"
                              }
                            ]
                          }
                        }
                      },
                      {
                        "type": "call",
                        "fun": "gc",
                        "args": {
                          "verbose": {
                            "type": "literal",
                            "value": false
                          }
                        }
                      },
                      {
                        "type": "call",
                        "fun": "invisible",
                        "args": [
                          {
                            "type": "NULL",
                            "value": []
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "NULL",
                    "value": []
                  }
                ]
              }
            }
          },
          "public": {
            "type": "call",
            "fun": "list",
            "args": {
              "initialize": {
                "type": "call",
                "fun": "function",
                "args": [
                  {
                    "type": "pairlist",
                    "value": "10"
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".max_size"
                              }
                            ]
                          },
                          {
                            "type": "name",
                            "value": "max_size"
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".cache"
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "new.env",
                            "args": {
                              "parent": {
                                "type": "call",
                                "fun": "emptyenv",
                                "args": []
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".access_times"
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "new.env",
                            "args": {
                              "parent": {
                                "type": "call",
                                "fun": "emptyenv",
                                "args": []
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".access_counts"
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "new.env",
                            "args": {
                              "parent": {
                                "type": "call",
                                "fun": "emptyenv",
                                "args": []
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".model_sizes"
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "new.env",
                            "args": {
                              "parent": {
                                "type": "call",
                                "fun": "emptyenv",
                                "args": []
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".total_memory"
                              }
                            ]
                          },
                          {
                            "type": "literal",
                            "value": 0
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "message",
                        "args": [
                          {
                            "type": "call",
                            "fun": "sprintf",
                            "args": [
                              {
                                "type": "literal",
                                "value": "LRU Cache initialized with max size: %d models"
                              },
                              {
                                "type": "name",
                                "value": "max_size"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "NULL",
                    "value": []
                  }
                ]
              },
              "get": {
                "type": "call",
                "fun": "function",
                "args": [
                  {
                    "type": "pairlist",
                    "value": ["", "FALSE"]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "if",
                        "args": [
                          {
                            "type": "call",
                            "fun": "!",
                            "args": [
                              {
                                "type": "call",
                                "fun": "file.exists",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "stan_file"
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "stop",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": "Stan file not found: "
                                  },
                                  {
                                    "type": "name",
                                    "value": "stan_file"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "key"
                          },
                          {
                            "type": "call",
                            "fun": ["::", "digest", "digest"],
                            "args": [
                              {
                                "type": "call",
                                "fun": "c",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "stan_file"
                                  },
                                  {
                                    "type": "call",
                                    "fun": "file.mtime",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "stan_file"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "if",
                        "args": [
                          {
                            "type": "call",
                            "fun": "&&",
                            "args": [
                              {
                                "type": "name",
                                "value": "force_recompile"
                              },
                              {
                                "type": "call",
                                "fun": "exists",
                                "args": {
                                  "1": {
                                    "type": "name",
                                    "value": "key"
                                  },
                                  "envir": {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "private"
                                      },
                                      {
                                        "type": "name",
                                        "value": ".cache"
                                      }
                                    ]
                                  }
                                }
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "message",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": "Force recompiling model: "
                                  },
                                  {
                                    "type": "call",
                                    "fun": "basename",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "stan_file"
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "rm",
                                "args": {
                                  "list": {
                                    "type": "name",
                                    "value": "key"
                                  },
                                  "envir": {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "private"
                                      },
                                      {
                                        "type": "name",
                                        "value": ".cache"
                                      }
                                    ]
                                  }
                                }
                              },
                              {
                                "type": "call",
                                "fun": "if",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "exists",
                                    "args": {
                                      "1": {
                                        "type": "name",
                                        "value": "key"
                                      },
                                      "envir": {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "private"
                                          },
                                          {
                                            "type": "name",
                                            "value": ".access_times"
                                          }
                                        ]
                                      }
                                    }
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "rm",
                                        "args": {
                                          "list": {
                                            "type": "name",
                                            "value": "key"
                                          },
                                          "envir": {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "private"
                                              },
                                              {
                                                "type": "name",
                                                "value": ".access_times"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "if",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "exists",
                                    "args": {
                                      "1": {
                                        "type": "name",
                                        "value": "key"
                                      },
                                      "envir": {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "private"
                                          },
                                          {
                                            "type": "name",
                                            "value": ".access_counts"
                                          }
                                        ]
                                      }
                                    }
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "rm",
                                        "args": {
                                          "list": {
                                            "type": "name",
                                            "value": "key"
                                          },
                                          "envir": {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "private"
                                              },
                                              {
                                                "type": "name",
                                                "value": ".access_counts"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "if",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "exists",
                                    "args": {
                                      "1": {
                                        "type": "name",
                                        "value": "key"
                                      },
                                      "envir": {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "private"
                                          },
                                          {
                                            "type": "name",
                                            "value": ".model_sizes"
                                          }
                                        ]
                                      }
                                    }
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "private"
                                              },
                                              {
                                                "type": "name",
                                                "value": ".total_memory"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "-",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "private"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": ".total_memory"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "[[",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "private"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": ".model_sizes"
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "key"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "rm",
                                        "args": {
                                          "list": {
                                            "type": "name",
                                            "value": "key"
                                          },
                                          "envir": {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "private"
                                              },
                                              {
                                                "type": "name",
                                                "value": ".model_sizes"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "if",
                        "args": [
                          {
                            "type": "call",
                            "fun": "exists",
                            "args": {
                              "1": {
                                "type": "name",
                                "value": "key"
                              },
                              "envir": {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "private"
                                  },
                                  {
                                    "type": "name",
                                    "value": ".cache"
                                  }
                                ]
                              }
                            }
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "assign",
                                "args": {
                                  "1": {
                                    "type": "name",
                                    "value": "key"
                                  },
                                  "2": {
                                    "type": "call",
                                    "fun": "as.numeric",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "Sys.time",
                                        "args": []
                                      }
                                    ]
                                  },
                                  "envir": {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "private"
                                      },
                                      {
                                        "type": "name",
                                        "value": ".access_times"
                                      }
                                    ]
                                  }
                                }
                              },
                              {
                                "type": "call",
                                "fun": "<-",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "current_count"
                                  },
                                  {
                                    "type": "call",
                                    "fun": "get",
                                    "args": {
                                      "1": {
                                        "type": "name",
                                        "value": "key"
                                      },
                                      "envir": {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "private"
                                          },
                                          {
                                            "type": "name",
                                            "value": ".access_counts"
                                          }
                                        ]
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "assign",
                                "args": {
                                  "1": {
                                    "type": "name",
                                    "value": "key"
                                  },
                                  "2": {
                                    "type": "call",
                                    "fun": "+",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "current_count"
                                      },
                                      {
                                        "type": "literal",
                                        "value": 1
                                      }
                                    ]
                                  },
                                  "envir": {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "private"
                                      },
                                      {
                                        "type": "name",
                                        "value": ".access_counts"
                                      }
                                    ]
                                  }
                                }
                              },
                              {
                                "type": "call",
                                "fun": "message",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "sprintf",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "Using cached Stan model: %s (access count: %d)"
                                      },
                                      {
                                        "type": "call",
                                        "fun": "basename",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "stan_file"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "+",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "current_count"
                                          },
                                          {
                                            "type": "literal",
                                            "value": 1
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "return",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "get",
                                    "args": {
                                      "1": {
                                        "type": "name",
                                        "value": "key"
                                      },
                                      "envir": {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "private"
                                          },
                                          {
                                            "type": "name",
                                            "value": ".cache"
                                          }
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "current_size"
                          },
                          {
                            "type": "call",
                            "fun": "length",
                            "args": [
                              {
                                "type": "call",
                                "fun": "ls",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "private"
                                      },
                                      {
                                        "type": "name",
                                        "value": ".cache"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "if",
                        "args": [
                          {
                            "type": "call",
                            "fun": ">=",
                            "args": [
                              {
                                "type": "name",
                                "value": "current_size"
                              },
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "private"
                                  },
                                  {
                                    "type": "name",
                                    "value": ".max_size"
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "message",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "sprintf",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "Cache full (%d/%d), evicting least recently used model"
                                      },
                                      {
                                        "type": "name",
                                        "value": "current_size"
                                      },
                                      {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "private"
                                          },
                                          {
                                            "type": "name",
                                            "value": ".max_size"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": ["$", "private", "evict_lru"],
                                "args": []
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "message",
                        "args": [
                          {
                            "type": "literal",
                            "value": "Compiling Stan model: "
                          },
                          {
                            "type": "call",
                            "fun": "basename",
                            "args": [
                              {
                                "type": "name",
                                "value": "stan_file"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "model"
                          },
                          {
                            "type": "call",
                            "fun": "tryCatch",
                            "args": {
                              "1": {
                                "type": "call",
                                "fun": "{",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "if",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "requireNamespace",
                                        "args": {
                                          "1": {
                                            "type": "literal",
                                            "value": "cmdstanr"
                                          },
                                          "quietly": {
                                            "type": "literal",
                                            "value": true
                                          }
                                        }
                                      },
                                      {
                                        "type": "call",
                                        "fun": "{",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": ["::", "cmdstanr", "cmdstan_model"],
                                            "args": {
                                              "1": {
                                                "type": "name",
                                                "value": "stan_file"
                                              },
                                              "compile": {
                                                "type": "literal",
                                                "value": true
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "{",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "stop",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "cmdstanr package not available"
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              "error": {
                                "type": "call",
                                "fun": "function",
                                "args": [
                                  {
                                    "type": "pairlist",
                                    "value": ""
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "stop",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "sprintf",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "Failed to compile Stan model %s: %s"
                                              },
                                              {
                                                "type": "call",
                                                "fun": "basename",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "stan_file"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "e"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "message"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "model_size"
                          },
                          {
                            "type": "call",
                            "fun": ["$", "private", "get_object_size"],
                            "args": [
                              {
                                "type": "name",
                                "value": "model"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "assign",
                        "args": {
                          "1": {
                            "type": "name",
                            "value": "key"
                          },
                          "2": {
                            "type": "name",
                            "value": "model"
                          },
                          "envir": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".cache"
                              }
                            ]
                          }
                        }
                      },
                      {
                        "type": "call",
                        "fun": "assign",
                        "args": {
                          "1": {
                            "type": "name",
                            "value": "key"
                          },
                          "2": {
                            "type": "call",
                            "fun": "as.numeric",
                            "args": [
                              {
                                "type": "call",
                                "fun": "Sys.time",
                                "args": []
                              }
                            ]
                          },
                          "envir": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".access_times"
                              }
                            ]
                          }
                        }
                      },
                      {
                        "type": "call",
                        "fun": "assign",
                        "args": {
                          "1": {
                            "type": "name",
                            "value": "key"
                          },
                          "2": {
                            "type": "literal",
                            "value": 1
                          },
                          "envir": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".access_counts"
                              }
                            ]
                          }
                        }
                      },
                      {
                        "type": "call",
                        "fun": "assign",
                        "args": {
                          "1": {
                            "type": "name",
                            "value": "key"
                          },
                          "2": {
                            "type": "name",
                            "value": "model_size"
                          },
                          "envir": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".model_sizes"
                              }
                            ]
                          }
                        }
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".total_memory"
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "+",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "private"
                                  },
                                  {
                                    "type": "name",
                                    "value": ".total_memory"
                                  }
                                ]
                              },
                              {
                                "type": "name",
                                "value": "model_size"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "message",
                        "args": [
                          {
                            "type": "call",
                            "fun": "sprintf",
                            "args": [
                              {
                                "type": "literal",
                                "value": "Model cached successfully (size: %.2f MB, total cache: %.2f MB)"
                              },
                              {
                                "type": "call",
                                "fun": "/",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "model_size"
                                  },
                                  {
                                    "type": "call",
                                    "fun": "^",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": 1024
                                      },
                                      {
                                        "type": "literal",
                                        "value": 2
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "/",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "private"
                                      },
                                      {
                                        "type": "name",
                                        "value": ".total_memory"
                                      }
                                    ]
                                  },
                                  {
                                    "type": "call",
                                    "fun": "^",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": 1024
                                      },
                                      {
                                        "type": "literal",
                                        "value": 2
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "return",
                        "args": [
                          {
                            "type": "name",
                            "value": "model"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "NULL",
                    "value": []
                  }
                ]
              },
              "clear": {
                "type": "call",
                "fun": "function",
                "args": [
                  {
                    "type": "NULL",
                    "value": []
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "keys"
                          },
                          {
                            "type": "call",
                            "fun": "ls",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "private"
                                  },
                                  {
                                    "type": "name",
                                    "value": ".cache"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "if",
                        "args": [
                          {
                            "type": "call",
                            "fun": ">",
                            "args": [
                              {
                                "type": "call",
                                "fun": "length",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "keys"
                                  }
                                ]
                              },
                              {
                                "type": "literal",
                                "value": 0
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "message",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "sprintf",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "Clearing %d cached models"
                                      },
                                      {
                                        "type": "call",
                                        "fun": "length",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "keys"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "rm",
                                "args": {
                                  "list": {
                                    "type": "name",
                                    "value": "keys"
                                  },
                                  "envir": {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "private"
                                      },
                                      {
                                        "type": "name",
                                        "value": ".cache"
                                      }
                                    ]
                                  }
                                }
                              },
                              {
                                "type": "call",
                                "fun": "rm",
                                "args": {
                                  "list": {
                                    "type": "name",
                                    "value": "keys"
                                  },
                                  "envir": {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "private"
                                      },
                                      {
                                        "type": "name",
                                        "value": ".access_times"
                                      }
                                    ]
                                  }
                                }
                              },
                              {
                                "type": "call",
                                "fun": "rm",
                                "args": {
                                  "list": {
                                    "type": "name",
                                    "value": "keys"
                                  },
                                  "envir": {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "private"
                                      },
                                      {
                                        "type": "name",
                                        "value": ".access_counts"
                                      }
                                    ]
                                  }
                                }
                              },
                              {
                                "type": "call",
                                "fun": "rm",
                                "args": {
                                  "list": {
                                    "type": "name",
                                    "value": "keys"
                                  },
                                  "envir": {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "private"
                                      },
                                      {
                                        "type": "name",
                                        "value": ".model_sizes"
                                      }
                                    ]
                                  }
                                }
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".total_memory"
                              }
                            ]
                          },
                          {
                            "type": "literal",
                            "value": 0
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "gc",
                        "args": {
                          "verbose": {
                            "type": "literal",
                            "value": false
                          }
                        }
                      },
                      {
                        "type": "call",
                        "fun": "message",
                        "args": [
                          {
                            "type": "literal",
                            "value": "Cache cleared and memory freed"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "NULL",
                    "value": []
                  }
                ]
              },
              "get_stats": {
                "type": "call",
                "fun": "function",
                "args": [
                  {
                    "type": "NULL",
                    "value": []
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "keys"
                          },
                          {
                            "type": "call",
                            "fun": "ls",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "private"
                                  },
                                  {
                                    "type": "name",
                                    "value": ".cache"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "n_models"
                          },
                          {
                            "type": "call",
                            "fun": "length",
                            "args": [
                              {
                                "type": "name",
                                "value": "keys"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "if",
                        "args": [
                          {
                            "type": "call",
                            "fun": "==",
                            "args": [
                              {
                                "type": "name",
                                "value": "n_models"
                              },
                              {
                                "type": "literal",
                                "value": 0
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "return",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "list",
                                    "args": {
                                      "n_models": {
                                        "type": "literal",
                                        "value": 0
                                      },
                                      "total_size_mb": {
                                        "type": "literal",
                                        "value": 0
                                      },
                                      "models": {
                                        "type": "call",
                                        "fun": "data.frame",
                                        "args": []
                                      },
                                      "max_size": {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "private"
                                          },
                                          {
                                            "type": "name",
                                            "value": ".max_size"
                                          }
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "model_info"
                          },
                          {
                            "type": "call",
                            "fun": "data.frame",
                            "args": {
                              "key": {
                                "type": "name",
                                "value": "keys"
                              },
                              "size_mb": {
                                "type": "call",
                                "fun": "sapply",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "keys"
                                  },
                                  {
                                    "type": "call",
                                    "fun": "function",
                                    "args": [
                                      {
                                        "type": "pairlist",
                                        "value": ""
                                      },
                                      {
                                        "type": "call",
                                        "fun": "/",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "[[",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "private"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": ".model_sizes"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "name",
                                                "value": "k"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "^",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": 1024
                                              },
                                              {
                                                "type": "literal",
                                                "value": 2
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "NULL",
                                        "value": []
                                      }
                                    ]
                                  }
                                ]
                              },
                              "access_count": {
                                "type": "call",
                                "fun": "sapply",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "keys"
                                  },
                                  {
                                    "type": "call",
                                    "fun": "function",
                                    "args": [
                                      {
                                        "type": "pairlist",
                                        "value": ""
                                      },
                                      {
                                        "type": "call",
                                        "fun": "get",
                                        "args": {
                                          "1": {
                                            "type": "name",
                                            "value": "k"
                                          },
                                          "envir": {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "private"
                                              },
                                              {
                                                "type": "name",
                                                "value": ".access_counts"
                                              }
                                            ]
                                          }
                                        }
                                      },
                                      {
                                        "type": "NULL",
                                        "value": []
                                      }
                                    ]
                                  }
                                ]
                              },
                              "last_access": {
                                "type": "call",
                                "fun": "sapply",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "keys"
                                  },
                                  {
                                    "type": "call",
                                    "fun": "function",
                                    "args": [
                                      {
                                        "type": "pairlist",
                                        "value": ""
                                      },
                                      {
                                        "type": "call",
                                        "fun": "{",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "as.POSIXct",
                                            "args": {
                                              "1": {
                                                "type": "call",
                                                "fun": "get",
                                                "args": {
                                                  "1": {
                                                    "type": "name",
                                                    "value": "k"
                                                  },
                                                  "envir": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "private"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": ".access_times"
                                                      }
                                                    ]
                                                  }
                                                }
                                              },
                                              "origin": {
                                                "type": "literal",
                                                "value": "1970-01-01"
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "NULL",
                                        "value": []
                                      }
                                    ]
                                  }
                                ]
                              },
                              "stringsAsFactors": {
                                "type": "literal",
                                "value": false
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "model_info"
                          },
                          {
                            "type": "call",
                            "fun": "[",
                            "args": [
                              {
                                "type": "name",
                                "value": "model_info"
                              },
                              {
                                "type": "call",
                                "fun": "order",
                                "args": {
                                  "1": {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "model_info"
                                      },
                                      {
                                        "type": "name",
                                        "value": "last_access"
                                      }
                                    ]
                                  },
                                  "decreasing": {
                                    "type": "literal",
                                    "value": true
                                  }
                                }
                              },
                              {
                                "type": "name",
                                "value": ""
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "call",
                            "fun": "rownames",
                            "args": [
                              {
                                "type": "name",
                                "value": "model_info"
                              }
                            ]
                          },
                          {
                            "type": "NULL",
                            "value": []
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "list",
                        "args": {
                          "n_models": {
                            "type": "name",
                            "value": "n_models"
                          },
                          "total_size_mb": {
                            "type": "call",
                            "fun": "/",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "private"
                                  },
                                  {
                                    "type": "name",
                                    "value": ".total_memory"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "^",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": 1024
                                  },
                                  {
                                    "type": "literal",
                                    "value": 2
                                  }
                                ]
                              }
                            ]
                          },
                          "models": {
                            "type": "name",
                            "value": "model_info"
                          },
                          "max_size": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "private"
                              },
                              {
                                "type": "name",
                                "value": ".max_size"
                              }
                            ]
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "NULL",
                    "value": []
                  }
                ]
              },
              "print": {
                "type": "call",
                "fun": "function",
                "args": [
                  {
                    "type": "NULL",
                    "value": []
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "stats"
                          },
                          {
                            "type": "call",
                            "fun": ["$", "self", "get_stats"],
                            "args": []
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "cat",
                        "args": [
                          {
                            "type": "literal",
                            "value": "LRU Stan Model Cache\n"
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "cat",
                        "args": [
                          {
                            "type": "call",
                            "fun": "sprintf",
                            "args": [
                              {
                                "type": "literal",
                                "value": "  Models: %d / %d\n"
                              },
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "stats"
                                  },
                                  {
                                    "type": "name",
                                    "value": "n_models"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "stats"
                                  },
                                  {
                                    "type": "name",
                                    "value": "max_size"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "cat",
                        "args": [
                          {
                            "type": "call",
                            "fun": "sprintf",
                            "args": [
                              {
                                "type": "literal",
                                "value": "  Total size: %.2f MB\n"
                              },
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "stats"
                                  },
                                  {
                                    "type": "name",
                                    "value": "total_size_mb"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "if",
                        "args": [
                          {
                            "type": "call",
                            "fun": ">",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "stats"
                                  },
                                  {
                                    "type": "name",
                                    "value": "n_models"
                                  }
                                ]
                              },
                              {
                                "type": "literal",
                                "value": 0
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "cat",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": "\nCached models:\n"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "for",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "i"
                                  },
                                  {
                                    "type": "call",
                                    "fun": ":",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": 1
                                      },
                                      {
                                        "type": "call",
                                        "fun": "nrow",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "stats"
                                              },
                                              {
                                                "type": "name",
                                                "value": "models"
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "cat",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "sprintf",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "  %d. Size: %.2f MB, Accessed: %d times, Last: %s\n"
                                              },
                                              {
                                                "type": "name",
                                                "value": "i"
                                              },
                                              {
                                                "type": "call",
                                                "fun": "[",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "stats"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "models"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "size_mb"
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "i"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "[",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "stats"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "models"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "access_count"
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "i"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "format",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "[",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "$",
                                                            "args": [
                                                              {
                                                                "type": "name",
                                                                "value": "stats"
                                                              },
                                                              {
                                                                "type": "name",
                                                                "value": "models"
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "last_access"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "i"
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": "%Y-%m-%d %H:%M:%S"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "invisible",
                        "args": [
                          {
                            "type": "name",
                            "value": "self"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "NULL",
                    "value": []
                  }
                ]
              }
            }
          }
        }
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": ".stan_lru_cache"
      },
      {
        "type": "NULL",
        "value": []
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "get_lru_cache"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": "10"
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "is.null",
                    "args": [
                      {
                        "type": "name",
                        "value": ".stan_lru_cache"
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<<-",
                        "args": [
                          {
                            "type": "name",
                            "value": ".stan_lru_cache"
                          },
                          {
                            "type": "call",
                            "fun": ["$", "LRUCache", "new"],
                            "args": {
                              "max_size": {
                                "type": "name",
                                "value": "max_size"
                              }
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "name",
                "value": ".stan_lru_cache"
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "get_memory_stats"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "NULL",
            "value": []
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "mem_info"
                  },
                  {
                    "type": "call",
                    "fun": "gc",
                    "args": {
                      "verbose": {
                        "type": "literal",
                        "value": false
                      }
                    }
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "cache"
                  },
                  {
                    "type": "call",
                    "fun": "get_lru_cache",
                    "args": []
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "cache_stats"
                  },
                  {
                    "type": "call",
                    "fun": ["$", "cache", "get_stats"],
                    "args": []
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "system_mem"
                  },
                  {
                    "type": "call",
                    "fun": "tryCatch",
                    "args": {
                      "1": {
                        "type": "call",
                        "fun": "{",
                        "args": [
                          {
                            "type": "call",
                            "fun": "if",
                            "args": [
                              {
                                "type": "call",
                                "fun": "==",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "[",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "Sys.info",
                                        "args": []
                                      },
                                      {
                                        "type": "literal",
                                        "value": "sysname"
                                      }
                                    ]
                                  },
                                  {
                                    "type": "literal",
                                    "value": "Linux"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "{",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "<-",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "mem_output"
                                      },
                                      {
                                        "type": "call",
                                        "fun": "system",
                                        "args": {
                                          "1": {
                                            "type": "literal",
                                            "value": "free -m"
                                          },
                                          "intern": {
                                            "type": "literal",
                                            "value": true
                                          }
                                        }
                                      }
                                    ]
                                  },
                                  {
                                    "type": "call",
                                    "fun": "<-",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "total_line"
                                      },
                                      {
                                        "type": "call",
                                        "fun": "grep",
                                        "args": {
                                          "1": {
                                            "type": "literal",
                                            "value": "^Mem:"
                                          },
                                          "2": {
                                            "type": "name",
                                            "value": "mem_output"
                                          },
                                          "value": {
                                            "type": "literal",
                                            "value": true
                                          }
                                        }
                                      }
                                    ]
                                  },
                                  {
                                    "type": "call",
                                    "fun": "if",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": ">",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "length",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "total_line"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "literal",
                                            "value": 0
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "{",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "<-",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "values"
                                              },
                                              {
                                                "type": "call",
                                                "fun": "as.numeric",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "[",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "[[",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "strsplit",
                                                            "args": [
                                                              {
                                                                "type": "call",
                                                                "fun": "gsub",
                                                                "args": [
                                                                  {
                                                                    "type": "literal",
                                                                    "value": "\\s+"
                                                                  },
                                                                  {
                                                                    "type": "literal",
                                                                    "value": " "
                                                                  },
                                                                  {
                                                                    "type": "name",
                                                                    "value": "total_line"
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "type": "literal",
                                                                "value": " "
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "type": "literal",
                                                            "value": 1
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": ":",
                                                        "args": [
                                                          {
                                                            "type": "literal",
                                                            "value": 2
                                                          },
                                                          {
                                                            "type": "literal",
                                                            "value": 4
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "list",
                                            "args": {
                                              "total_mb": {
                                                "type": "call",
                                                "fun": "[",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "values"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 1
                                                  }
                                                ]
                                              },
                                              "used_mb": {
                                                "type": "call",
                                                "fun": "[",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "values"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 2
                                                  }
                                                ]
                                              },
                                              "free_mb": {
                                                "type": "call",
                                                "fun": "[",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "values"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 3
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "NULL",
                                        "value": []
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "if",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "==",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "[",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "Sys.info",
                                            "args": []
                                          },
                                          {
                                            "type": "literal",
                                            "value": "sysname"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "literal",
                                        "value": "Darwin"
                                      }
                                    ]
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "vm_output"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "system",
                                            "args": {
                                              "1": {
                                                "type": "literal",
                                                "value": "vm_stat"
                                              },
                                              "intern": {
                                                "type": "literal",
                                                "value": true
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "page_size"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "as.numeric",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "gsub",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "[^0-9]"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": ""
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "[",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "grep",
                                                        "args": {
                                                          "1": {
                                                            "type": "literal",
                                                            "value": "page size"
                                                          },
                                                          "2": {
                                                            "type": "name",
                                                            "value": "vm_output"
                                                          },
                                                          "value": {
                                                            "type": "literal",
                                                            "value": true
                                                          }
                                                        }
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": 1
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "free_pages"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "as.numeric",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "gsub",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "[^0-9]"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": ""
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "[",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "grep",
                                                        "args": {
                                                          "1": {
                                                            "type": "literal",
                                                            "value": "Pages free"
                                                          },
                                                          "2": {
                                                            "type": "name",
                                                            "value": "vm_output"
                                                          },
                                                          "value": {
                                                            "type": "literal",
                                                            "value": true
                                                          }
                                                        }
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": 1
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "active_pages"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "as.numeric",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "gsub",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "[^0-9]"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": ""
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "[",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "grep",
                                                        "args": {
                                                          "1": {
                                                            "type": "literal",
                                                            "value": "Pages active"
                                                          },
                                                          "2": {
                                                            "type": "name",
                                                            "value": "vm_output"
                                                          },
                                                          "value": {
                                                            "type": "literal",
                                                            "value": true
                                                          }
                                                        }
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": 1
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "list",
                                        "args": {
                                          "free_mb": {
                                            "type": "call",
                                            "fun": "/",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "(",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "*",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "free_pages"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "page_size"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "^",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": 1024
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 2
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          "active_mb": {
                                            "type": "call",
                                            "fun": "/",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "(",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "*",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "active_pages"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "page_size"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "^",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": 1024
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 2
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "NULL",
                                        "value": []
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      "error": {
                        "type": "call",
                        "fun": "function",
                        "args": [
                          {
                            "type": "pairlist",
                            "value": ""
                          },
                          {
                            "type": "NULL",
                            "value": []
                          },
                          {
                            "type": "NULL",
                            "value": []
                          }
                        ]
                      }
                    }
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "stats"
                  },
                  {
                    "type": "call",
                    "fun": "list",
                    "args": {
                      "timestamp": {
                        "type": "call",
                        "fun": "Sys.time",
                        "args": []
                      },
                      "r_memory": {
                        "type": "call",
                        "fun": "list",
                        "args": {
                          "used_mb": {
                            "type": "call",
                            "fun": "/",
                            "args": [
                              {
                                "type": "call",
                                "fun": "sum",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "[",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "mem_info"
                                      },
                                      {
                                        "type": "name",
                                        "value": ""
                                      },
                                      {
                                        "type": "literal",
                                        "value": "used"
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "literal",
                                "value": 1024
                              }
                            ]
                          },
                          "gc_trigger_mb": {
                            "type": "call",
                            "fun": "/",
                            "args": [
                              {
                                "type": "call",
                                "fun": "sum",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "[",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "mem_info"
                                      },
                                      {
                                        "type": "name",
                                        "value": ""
                                      },
                                      {
                                        "type": "literal",
                                        "value": "max used"
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "literal",
                                "value": 1024
                              }
                            ]
                          }
                        }
                      },
                      "cache": {
                        "type": "call",
                        "fun": "list",
                        "args": {
                          "n_models": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "cache_stats"
                              },
                              {
                                "type": "name",
                                "value": "n_models"
                              }
                            ]
                          },
                          "max_models": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "cache_stats"
                              },
                              {
                                "type": "name",
                                "value": "max_size"
                              }
                            ]
                          },
                          "total_size_mb": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "cache_stats"
                              },
                              {
                                "type": "name",
                                "value": "total_size_mb"
                              }
                            ]
                          },
                          "models": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "cache_stats"
                              },
                              {
                                "type": "name",
                                "value": "models"
                              }
                            ]
                          }
                        }
                      },
                      "system": {
                        "type": "name",
                        "value": "system_mem"
                      }
                    }
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "call",
                    "fun": "class",
                    "args": [
                      {
                        "type": "name",
                        "value": "stats"
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "c",
                    "args": [
                      {
                        "type": "literal",
                        "value": "memory_stats"
                      },
                      {
                        "type": "literal",
                        "value": "list"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "name",
                "value": "stats"
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "print.memory_stats"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", ""]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "cat",
                "args": [
                  {
                    "type": "literal",
                    "value": "=== Memory Statistics ===\n"
                  }
                ]
              },
              {
                "type": "call",
                "fun": "cat",
                "args": [
                  {
                    "type": "literal",
                    "value": "Timestamp:"
                  },
                  {
                    "type": "call",
                    "fun": "format",
                    "args": [
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "name",
                            "value": "x"
                          },
                          {
                            "type": "name",
                            "value": "timestamp"
                          }
                        ]
                      },
                      {
                        "type": "literal",
                        "value": "%Y-%m-%d %H:%M:%S"
                      }
                    ]
                  },
                  {
                    "type": "literal",
                    "value": "\n\n"
                  }
                ]
              },
              {
                "type": "call",
                "fun": "cat",
                "args": [
                  {
                    "type": "literal",
                    "value": "R Memory Usage:\n"
                  }
                ]
              },
              {
                "type": "call",
                "fun": "cat",
                "args": [
                  {
                    "type": "call",
                    "fun": "sprintf",
                    "args": [
                      {
                        "type": "literal",
                        "value": "  Used: %.2f MB\n"
                      },
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "x"
                              },
                              {
                                "type": "name",
                                "value": "r_memory"
                              }
                            ]
                          },
                          {
                            "type": "name",
                            "value": "used_mb"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "cat",
                "args": [
                  {
                    "type": "call",
                    "fun": "sprintf",
                    "args": [
                      {
                        "type": "literal",
                        "value": "  GC Trigger: %.2f MB\n"
                      },
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "x"
                              },
                              {
                                "type": "name",
                                "value": "r_memory"
                              }
                            ]
                          },
                          {
                            "type": "name",
                            "value": "gc_trigger_mb"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "cat",
                "args": [
                  {
                    "type": "literal",
                    "value": "\n"
                  }
                ]
              },
              {
                "type": "call",
                "fun": "cat",
                "args": [
                  {
                    "type": "literal",
                    "value": "Stan Model Cache:\n"
                  }
                ]
              },
              {
                "type": "call",
                "fun": "cat",
                "args": [
                  {
                    "type": "call",
                    "fun": "sprintf",
                    "args": [
                      {
                        "type": "literal",
                        "value": "  Models: %d / %d\n"
                      },
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "x"
                              },
                              {
                                "type": "name",
                                "value": "cache"
                              }
                            ]
                          },
                          {
                            "type": "name",
                            "value": "n_models"
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "x"
                              },
                              {
                                "type": "name",
                                "value": "cache"
                              }
                            ]
                          },
                          {
                            "type": "name",
                            "value": "max_models"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "cat",
                "args": [
                  {
                    "type": "call",
                    "fun": "sprintf",
                    "args": [
                      {
                        "type": "literal",
                        "value": "  Total Size: %.2f MB\n"
                      },
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "x"
                              },
                              {
                                "type": "name",
                                "value": "cache"
                              }
                            ]
                          },
                          {
                            "type": "name",
                            "value": "total_size_mb"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": ">",
                    "args": [
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "x"
                              },
                              {
                                "type": "name",
                                "value": "cache"
                              }
                            ]
                          },
                          {
                            "type": "name",
                            "value": "n_models"
                          }
                        ]
                      },
                      {
                        "type": "literal",
                        "value": 0
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "cat",
                        "args": [
                          {
                            "type": "literal",
                            "value": "\n  Top 3 models by size:\n"
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "top_models"
                          },
                          {
                            "type": "call",
                            "fun": "head",
                            "args": [
                              {
                                "type": "call",
                                "fun": "[",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "x"
                                          },
                                          {
                                            "type": "name",
                                            "value": "cache"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "name",
                                        "value": "models"
                                      }
                                    ]
                                  },
                                  {
                                    "type": "call",
                                    "fun": "order",
                                    "args": {
                                      "1": {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "x"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "cache"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "name",
                                                "value": "models"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "name",
                                            "value": "size_mb"
                                          }
                                        ]
                                      },
                                      "decreasing": {
                                        "type": "literal",
                                        "value": true
                                      }
                                    }
                                  },
                                  {
                                    "type": "name",
                                    "value": ""
                                  }
                                ]
                              },
                              {
                                "type": "literal",
                                "value": 3
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "for",
                        "args": [
                          {
                            "type": "name",
                            "value": "i"
                          },
                          {
                            "type": "call",
                            "fun": ":",
                            "args": [
                              {
                                "type": "literal",
                                "value": 1
                              },
                              {
                                "type": "call",
                                "fun": "nrow",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "top_models"
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "cat",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "sprintf",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "    - %.2f MB (accessed %d times)\n"
                                      },
                                      {
                                        "type": "call",
                                        "fun": "[",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "top_models"
                                              },
                                              {
                                                "type": "name",
                                                "value": "size_mb"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "name",
                                            "value": "i"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "[",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "top_models"
                                              },
                                              {
                                                "type": "name",
                                                "value": "access_count"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "name",
                                            "value": "i"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "!",
                    "args": [
                      {
                        "type": "call",
                        "fun": "is.null",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "x"
                              },
                              {
                                "type": "name",
                                "value": "system"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "cat",
                        "args": [
                          {
                            "type": "literal",
                            "value": "\nSystem Memory:\n"
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "if",
                        "args": [
                          {
                            "type": "call",
                            "fun": "!",
                            "args": [
                              {
                                "type": "call",
                                "fun": "is.null",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "x"
                                          },
                                          {
                                            "type": "name",
                                            "value": "system"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "name",
                                        "value": "total_mb"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "cat",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "sprintf",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "  Total: %.0f MB\n"
                                      },
                                      {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "x"
                                              },
                                              {
                                                "type": "name",
                                                "value": "system"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "name",
                                            "value": "total_mb"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "cat",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "sprintf",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "  Used: %.0f MB\n"
                                      },
                                      {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "x"
                                              },
                                              {
                                                "type": "name",
                                                "value": "system"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "name",
                                            "value": "used_mb"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "cat",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "sprintf",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "  Free: %.0f MB\n"
                                      },
                                      {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "x"
                                              },
                                              {
                                                "type": "name",
                                                "value": "system"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "name",
                                            "value": "free_mb"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "if",
                            "args": [
                              {
                                "type": "call",
                                "fun": "!",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "is.null",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "x"
                                              },
                                              {
                                                "type": "name",
                                                "value": "system"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "name",
                                            "value": "free_mb"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "{",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "cat",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "sprintf",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "  Free: %.0f MB\n"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "x"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "system"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "name",
                                                "value": "free_mb"
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "call",
                                    "fun": "cat",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "sprintf",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "  Active: %.0f MB\n"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "x"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "system"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "name",
                                                "value": "active_mb"
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "invisible",
                "args": [
                  {
                    "type": "name",
                    "value": "x"
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "force_gc"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": "TRUE"
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "before"
                  },
                  {
                    "type": "call",
                    "fun": "gc",
                    "args": {
                      "verbose": {
                        "type": "literal",
                        "value": false
                      }
                    }
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "gc_result"
                  },
                  {
                    "type": "call",
                    "fun": "gc",
                    "args": {
                      "verbose": {
                        "type": "literal",
                        "value": false
                      },
                      "full": {
                        "type": "literal",
                        "value": true
                      }
                    }
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "after"
                  },
                  {
                    "type": "call",
                    "fun": "gc",
                    "args": {
                      "verbose": {
                        "type": "literal",
                        "value": false
                      }
                    }
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "name",
                    "value": "verbose"
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "freed_mb"
                          },
                          {
                            "type": "call",
                            "fun": "/",
                            "args": [
                              {
                                "type": "call",
                                "fun": "(",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "-",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "sum",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "[",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "before"
                                              },
                                              {
                                                "type": "name",
                                                "value": ""
                                              },
                                              {
                                                "type": "literal",
                                                "value": "used"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "sum",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "[",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "after"
                                              },
                                              {
                                                "type": "name",
                                                "value": ""
                                              },
                                              {
                                                "type": "literal",
                                                "value": "used"
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "literal",
                                "value": 1024
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "message",
                        "args": [
                          {
                            "type": "call",
                            "fun": "sprintf",
                            "args": [
                              {
                                "type": "literal",
                                "value": "Garbage collection completed. Freed: %.2f MB"
                              },
                              {
                                "type": "call",
                                "fun": "max",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": 0
                                  },
                                  {
                                    "type": "name",
                                    "value": "freed_mb"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "invisible",
                "args": [
                  {
                    "type": "name",
                    "value": "gc_result"
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  }
]
