[
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "mod_optimization_ui"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ""
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "ns"
                  },
                  {
                    "type": "call",
                    "fun": "NS",
                    "args": [
                      {
                        "type": "name",
                        "value": "id"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "tagList",
                "args": [
                  {
                    "type": "call",
                    "fun": "fluidRow",
                    "args": [
                      {
                        "type": "call",
                        "fun": "column",
                        "args": [
                          {
                            "type": "literal",
                            "value": 12
                          },
                          {
                            "type": "call",
                            "fun": "h3",
                            "args": [
                              {
                                "type": "literal",
                                "value": "Dose Optimization"
                              },
                              {
                                "type": "call",
                                "fun": "icon",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": "calculator"
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "hr",
                            "args": []
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "fluidRow",
                    "args": [
                      {
                        "type": "call",
                        "fun": "column",
                        "args": [
                          {
                            "type": "literal",
                            "value": 4
                          },
                          {
                            "type": "call",
                            "fun": "box",
                            "args": {
                              "title": {
                                "type": "literal",
                                "value": "Optimization Settings"
                              },
                              "status": {
                                "type": "literal",
                                "value": "warning"
                              },
                              "solidHeader": {
                                "type": "literal",
                                "value": true
                              },
                              "width": {
                                "type": "literal",
                                "value": 12
                              },
                              "5": {
                                "type": "call",
                                "fun": "h4",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": "Target Parameters"
                                  }
                                ]
                              },
                              "6": {
                                "type": "call",
                                "fun": "selectInput",
                                "args": {
                                  "1": {
                                    "type": "call",
                                    "fun": "ns",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "target_type"
                                      }
                                    ]
                                  },
                                  "2": {
                                    "type": "literal",
                                    "value": "Target Type"
                                  },
                                  "choices": {
                                    "type": "call",
                                    "fun": "c",
                                    "args": {
                                      "AUC": {
                                        "type": "literal",
                                        "value": "auc"
                                      },
                                      "Cmax": {
                                        "type": "literal",
                                        "value": "cmax"
                                      },
                                      "Cmin": {
                                        "type": "literal",
                                        "value": "cmin"
                                      },
                                      "Time above MIC": {
                                        "type": "literal",
                                        "value": "time_above_mic"
                                      },
                                      "AUC/MIC ratio": {
                                        "type": "literal",
                                        "value": "auc_mic_ratio"
                                      }
                                    }
                                  },
                                  "selected": {
                                    "type": "literal",
                                    "value": "auc"
                                  }
                                }
                              },
                              "7": {
                                "type": "call",
                                "fun": "numericInput",
                                "args": {
                                  "1": {
                                    "type": "call",
                                    "fun": "ns",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "target_value"
                                      }
                                    ]
                                  },
                                  "2": {
                                    "type": "literal",
                                    "value": "Target Value"
                                  },
                                  "value": {
                                    "type": "literal",
                                    "value": 400
                                  },
                                  "min": {
                                    "type": "literal",
                                    "value": 0
                                  },
                                  "step": {
                                    "type": "literal",
                                    "value": 10
                                  }
                                }
                              },
                              "8": {
                                "type": "call",
                                "fun": "conditionalPanel",
                                "args": {
                                  "condition": {
                                    "type": "literal",
                                    "value": "input.target_type.includes('mic')"
                                  },
                                  "ns": {
                                    "type": "name",
                                    "value": "ns"
                                  },
                                  "3": {
                                    "type": "call",
                                    "fun": "numericInput",
                                    "args": {
                                      "1": {
                                        "type": "call",
                                        "fun": "ns",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "mic_value"
                                          }
                                        ]
                                      },
                                      "2": {
                                        "type": "literal",
                                        "value": "MIC (mg/L)"
                                      },
                                      "value": {
                                        "type": "literal",
                                        "value": 2
                                      },
                                      "min": {
                                        "type": "literal",
                                        "value": 0
                                      },
                                      "step": {
                                        "type": "literal",
                                        "value": 0.1
                                      }
                                    }
                                  }
                                }
                              },
                              "9": {
                                "type": "call",
                                "fun": "hr",
                                "args": []
                              },
                              "10": {
                                "type": "call",
                                "fun": "h4",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": "Dosing Regimen"
                                  }
                                ]
                              },
                              "11": {
                                "type": "call",
                                "fun": "selectInput",
                                "args": {
                                  "1": {
                                    "type": "call",
                                    "fun": "ns",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "route"
                                      }
                                    ]
                                  },
                                  "2": {
                                    "type": "literal",
                                    "value": "Route of Administration"
                                  },
                                  "choices": {
                                    "type": "call",
                                    "fun": "c",
                                    "args": {
                                      "IV Bolus": {
                                        "type": "literal",
                                        "value": "iv_bolus"
                                      },
                                      "IV Infusion": {
                                        "type": "literal",
                                        "value": "iv_infusion"
                                      },
                                      "Oral": {
                                        "type": "literal",
                                        "value": "oral"
                                      },
                                      "Subcutaneous": {
                                        "type": "literal",
                                        "value": "sc"
                                      }
                                    }
                                  },
                                  "selected": {
                                    "type": "literal",
                                    "value": "iv_bolus"
                                  }
                                }
                              },
                              "12": {
                                "type": "call",
                                "fun": "conditionalPanel",
                                "args": {
                                  "condition": {
                                    "type": "literal",
                                    "value": "input.route == 'iv_infusion'"
                                  },
                                  "ns": {
                                    "type": "name",
                                    "value": "ns"
                                  },
                                  "3": {
                                    "type": "call",
                                    "fun": "numericInput",
                                    "args": {
                                      "1": {
                                        "type": "call",
                                        "fun": "ns",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "infusion_duration"
                                          }
                                        ]
                                      },
                                      "2": {
                                        "type": "literal",
                                        "value": "Infusion Duration (hours)"
                                      },
                                      "value": {
                                        "type": "literal",
                                        "value": 1
                                      },
                                      "min": {
                                        "type": "literal",
                                        "value": 0.1
                                      },
                                      "max": {
                                        "type": "literal",
                                        "value": 24
                                      },
                                      "step": {
                                        "type": "literal",
                                        "value": 0.1
                                      }
                                    }
                                  }
                                }
                              },
                              "13": {
                                "type": "call",
                                "fun": "numericInput",
                                "args": {
                                  "1": {
                                    "type": "call",
                                    "fun": "ns",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "dosing_interval"
                                      }
                                    ]
                                  },
                                  "2": {
                                    "type": "literal",
                                    "value": "Dosing Interval (hours)"
                                  },
                                  "value": {
                                    "type": "literal",
                                    "value": 12
                                  },
                                  "min": {
                                    "type": "literal",
                                    "value": 1
                                  },
                                  "max": {
                                    "type": "literal",
                                    "value": 168
                                  },
                                  "step": {
                                    "type": "literal",
                                    "value": 1
                                  }
                                }
                              },
                              "14": {
                                "type": "call",
                                "fun": "numericInput",
                                "args": {
                                  "1": {
                                    "type": "call",
                                    "fun": "ns",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "n_doses"
                                      }
                                    ]
                                  },
                                  "2": {
                                    "type": "literal",
                                    "value": "Number of Doses"
                                  },
                                  "value": {
                                    "type": "literal",
                                    "value": 10
                                  },
                                  "min": {
                                    "type": "literal",
                                    "value": 1
                                  },
                                  "max": {
                                    "type": "literal",
                                    "value": 100
                                  },
                                  "step": {
                                    "type": "literal",
                                    "value": 1
                                  }
                                }
                              },
                              "15": {
                                "type": "call",
                                "fun": "hr",
                                "args": []
                              },
                              "16": {
                                "type": "call",
                                "fun": "h4",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": "Optimization Constraints"
                                  }
                                ]
                              },
                              "17": {
                                "type": "call",
                                "fun": "numericInput",
                                "args": {
                                  "1": {
                                    "type": "call",
                                    "fun": "ns",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "min_dose"
                                      }
                                    ]
                                  },
                                  "2": {
                                    "type": "literal",
                                    "value": "Minimum Dose (mg)"
                                  },
                                  "value": {
                                    "type": "literal",
                                    "value": 10
                                  },
                                  "min": {
                                    "type": "literal",
                                    "value": 0
                                  },
                                  "step": {
                                    "type": "literal",
                                    "value": 10
                                  }
                                }
                              },
                              "18": {
                                "type": "call",
                                "fun": "numericInput",
                                "args": {
                                  "1": {
                                    "type": "call",
                                    "fun": "ns",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "max_dose"
                                      }
                                    ]
                                  },
                                  "2": {
                                    "type": "literal",
                                    "value": "Maximum Dose (mg)"
                                  },
                                  "value": {
                                    "type": "literal",
                                    "value": 2000
                                  },
                                  "min": {
                                    "type": "literal",
                                    "value": 0
                                  },
                                  "step": {
                                    "type": "literal",
                                    "value": 10
                                  }
                                }
                              },
                              "19": {
                                "type": "call",
                                "fun": "numericInput",
                                "args": {
                                  "1": {
                                    "type": "call",
                                    "fun": "ns",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "max_daily_dose"
                                      }
                                    ]
                                  },
                                  "2": {
                                    "type": "literal",
                                    "value": "Maximum Daily Dose (mg)"
                                  },
                                  "value": {
                                    "type": "literal",
                                    "value": 4000
                                  },
                                  "min": {
                                    "type": "literal",
                                    "value": 0
                                  },
                                  "step": {
                                    "type": "literal",
                                    "value": 10
                                  }
                                }
                              },
                              "20": {
                                "type": "call",
                                "fun": "hr",
                                "args": []
                              },
                              "21": {
                                "type": "call",
                                "fun": "h4",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": "Patient Covariates"
                                  }
                                ]
                              },
                              "22": {
                                "type": "call",
                                "fun": "numericInput",
                                "args": {
                                  "1": {
                                    "type": "call",
                                    "fun": "ns",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "weight"
                                      }
                                    ]
                                  },
                                  "2": {
                                    "type": "literal",
                                    "value": "Weight (kg)"
                                  },
                                  "value": {
                                    "type": "literal",
                                    "value": 70
                                  },
                                  "min": {
                                    "type": "literal",
                                    "value": 10
                                  },
                                  "max": {
                                    "type": "literal",
                                    "value": 200
                                  },
                                  "step": {
                                    "type": "literal",
                                    "value": 1
                                  }
                                }
                              },
                              "23": {
                                "type": "call",
                                "fun": "numericInput",
                                "args": {
                                  "1": {
                                    "type": "call",
                                    "fun": "ns",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "creatinine_clearance"
                                      }
                                    ]
                                  },
                                  "2": {
                                    "type": "literal",
                                    "value": "Creatinine Clearance (mL/min)"
                                  },
                                  "value": {
                                    "type": "literal",
                                    "value": 100
                                  },
                                  "min": {
                                    "type": "literal",
                                    "value": 10
                                  },
                                  "max": {
                                    "type": "literal",
                                    "value": 200
                                  },
                                  "step": {
                                    "type": "literal",
                                    "value": 1
                                  }
                                }
                              },
                              "24": {
                                "type": "call",
                                "fun": "selectInput",
                                "args": {
                                  "1": {
                                    "type": "call",
                                    "fun": "ns",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "gender"
                                      }
                                    ]
                                  },
                                  "2": {
                                    "type": "literal",
                                    "value": "Gender"
                                  },
                                  "choices": {
                                    "type": "call",
                                    "fun": "c",
                                    "args": {
                                      "Male": {
                                        "type": "literal",
                                        "value": "M"
                                      },
                                      "Female": {
                                        "type": "literal",
                                        "value": "F"
                                      }
                                    }
                                  },
                                  "selected": {
                                    "type": "literal",
                                    "value": "M"
                                  }
                                }
                              },
                              "25": {
                                "type": "call",
                                "fun": "numericInput",
                                "args": {
                                  "1": {
                                    "type": "call",
                                    "fun": "ns",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "age"
                                      }
                                    ]
                                  },
                                  "2": {
                                    "type": "literal",
                                    "value": "Age (years)"
                                  },
                                  "value": {
                                    "type": "literal",
                                    "value": 40
                                  },
                                  "min": {
                                    "type": "literal",
                                    "value": 18
                                  },
                                  "max": {
                                    "type": "literal",
                                    "value": 100
                                  },
                                  "step": {
                                    "type": "literal",
                                    "value": 1
                                  }
                                }
                              },
                              "26": {
                                "type": "call",
                                "fun": "hr",
                                "args": []
                              },
                              "27": {
                                "type": "call",
                                "fun": "actionButton",
                                "args": {
                                  "1": {
                                    "type": "call",
                                    "fun": "ns",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "optimize_dose"
                                      }
                                    ]
                                  },
                                  "2": {
                                    "type": "literal",
                                    "value": "Optimize Dose"
                                  },
                                  "class": {
                                    "type": "literal",
                                    "value": "btn-success"
                                  },
                                  "icon": {
                                    "type": "call",
                                    "fun": "icon",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "rocket"
                                      }
                                    ]
                                  },
                                  "width": {
                                    "type": "literal",
                                    "value": "100%"
                                  }
                                }
                              },
                              "28": {
                                "type": "call",
                                "fun": "br",
                                "args": []
                              },
                              "29": {
                                "type": "call",
                                "fun": "br",
                                "args": []
                              },
                              "30": {
                                "type": "call",
                                "fun": "actionButton",
                                "args": {
                                  "1": {
                                    "type": "call",
                                    "fun": "ns",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "simulate_regimen"
                                      }
                                    ]
                                  },
                                  "2": {
                                    "type": "literal",
                                    "value": "Simulate Regimen"
                                  },
                                  "class": {
                                    "type": "literal",
                                    "value": "btn-primary"
                                  },
                                  "icon": {
                                    "type": "call",
                                    "fun": "icon",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "chart-line"
                                      }
                                    ]
                                  },
                                  "width": {
                                    "type": "literal",
                                    "value": "100%"
                                  }
                                }
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "column",
                        "args": [
                          {
                            "type": "literal",
                            "value": 8
                          },
                          {
                            "type": "call",
                            "fun": "tabsetPanel",
                            "args": {
                              "id": {
                                "type": "call",
                                "fun": "ns",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": "optimization_tabs"
                                  }
                                ]
                              },
                              "2": {
                                "type": "call",
                                "fun": "tabPanel",
                                "args": {
                                  "1": {
                                    "type": "literal",
                                    "value": "Optimization Results"
                                  },
                                  "icon": {
                                    "type": "call",
                                    "fun": "icon",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "bullseye"
                                      }
                                    ]
                                  },
                                  "3": {
                                    "type": "call",
                                    "fun": "br",
                                    "args": []
                                  },
                                  "4": {
                                    "type": "call",
                                    "fun": "fluidRow",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "column",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": 12
                                          },
                                          {
                                            "type": "call",
                                            "fun": "valueBoxOutput",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "ns",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "optimal_dose_box"
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "valueBoxOutput",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "ns",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "predicted_target_box"
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "valueBoxOutput",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "ns",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "probability_box"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  "5": {
                                    "type": "call",
                                    "fun": "br",
                                    "args": []
                                  },
                                  "6": {
                                    "type": "call",
                                    "fun": "fluidRow",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "column",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": 12
                                          },
                                          {
                                            "type": "call",
                                            "fun": "h4",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "Recommended Dosing Regimen"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "tableOutput",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "ns",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "regimen_table"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  "7": {
                                    "type": "call",
                                    "fun": "br",
                                    "args": []
                                  },
                                  "8": {
                                    "type": "call",
                                    "fun": "fluidRow",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "column",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": 12
                                          },
                                          {
                                            "type": "call",
                                            "fun": "h4",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "Predicted Concentration-Time Profile"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "plotlyOutput",
                                            "args": {
                                              "1": {
                                                "type": "call",
                                                "fun": "ns",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "concentration_profile"
                                                  }
                                                ]
                                              },
                                              "height": {
                                                "type": "literal",
                                                "value": "400px"
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                }
                              },
                              "3": {
                                "type": "call",
                                "fun": "tabPanel",
                                "args": {
                                  "1": {
                                    "type": "literal",
                                    "value": "Dose-Response"
                                  },
                                  "icon": {
                                    "type": "call",
                                    "fun": "icon",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "chart-line"
                                      }
                                    ]
                                  },
                                  "3": {
                                    "type": "call",
                                    "fun": "br",
                                    "args": []
                                  },
                                  "4": {
                                    "type": "call",
                                    "fun": "plotlyOutput",
                                    "args": {
                                      "1": {
                                        "type": "call",
                                        "fun": "ns",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "dose_response_plot"
                                          }
                                        ]
                                      },
                                      "height": {
                                        "type": "literal",
                                        "value": "500px"
                                      }
                                    }
                                  },
                                  "5": {
                                    "type": "call",
                                    "fun": "br",
                                    "args": []
                                  },
                                  "6": {
                                    "type": "call",
                                    "fun": ["::", "DT", "DTOutput"],
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "ns",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "dose_response_table"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                }
                              },
                              "4": {
                                "type": "call",
                                "fun": "tabPanel",
                                "args": {
                                  "1": {
                                    "type": "literal",
                                    "value": "Probability of Target"
                                  },
                                  "icon": {
                                    "type": "call",
                                    "fun": "icon",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "percentage"
                                      }
                                    ]
                                  },
                                  "3": {
                                    "type": "call",
                                    "fun": "br",
                                    "args": []
                                  },
                                  "4": {
                                    "type": "call",
                                    "fun": "plotlyOutput",
                                    "args": {
                                      "1": {
                                        "type": "call",
                                        "fun": "ns",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "prob_target_plot"
                                          }
                                        ]
                                      },
                                      "height": {
                                        "type": "literal",
                                        "value": "400px"
                                      }
                                    }
                                  },
                                  "5": {
                                    "type": "call",
                                    "fun": "br",
                                    "args": []
                                  },
                                  "6": {
                                    "type": "call",
                                    "fun": "plotOutput",
                                    "args": {
                                      "1": {
                                        "type": "call",
                                        "fun": "ns",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "prob_distribution"
                                          }
                                        ]
                                      },
                                      "height": {
                                        "type": "literal",
                                        "value": "400px"
                                      }
                                    }
                                  }
                                }
                              },
                              "5": {
                                "type": "call",
                                "fun": "tabPanel",
                                "args": {
                                  "1": {
                                    "type": "literal",
                                    "value": "Sensitivity Analysis"
                                  },
                                  "icon": {
                                    "type": "call",
                                    "fun": "icon",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "sliders-h"
                                      }
                                    ]
                                  },
                                  "3": {
                                    "type": "call",
                                    "fun": "br",
                                    "args": []
                                  },
                                  "4": {
                                    "type": "call",
                                    "fun": "fluidRow",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "column",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": 6
                                          },
                                          {
                                            "type": "call",
                                            "fun": "h4",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "Parameter Sensitivity"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "plotOutput",
                                            "args": {
                                              "1": {
                                                "type": "call",
                                                "fun": "ns",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "sensitivity_tornado"
                                                  }
                                                ]
                                              },
                                              "height": {
                                                "type": "literal",
                                                "value": "400px"
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "column",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": 6
                                          },
                                          {
                                            "type": "call",
                                            "fun": "h4",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "Covariate Effects"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "plotOutput",
                                            "args": {
                                              "1": {
                                                "type": "call",
                                                "fun": "ns",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "covariate_effects"
                                                  }
                                                ]
                                              },
                                              "height": {
                                                "type": "literal",
                                                "value": "400px"
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  "5": {
                                    "type": "call",
                                    "fun": "br",
                                    "args": []
                                  },
                                  "6": {
                                    "type": "call",
                                    "fun": ["::", "DT", "DTOutput"],
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "ns",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "sensitivity_table"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                }
                              },
                              "6": {
                                "type": "call",
                                "fun": "tabPanel",
                                "args": {
                                  "1": {
                                    "type": "literal",
                                    "value": "Simulation Results"
                                  },
                                  "icon": {
                                    "type": "call",
                                    "fun": "icon",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "flask"
                                      }
                                    ]
                                  },
                                  "3": {
                                    "type": "call",
                                    "fun": "br",
                                    "args": []
                                  },
                                  "4": {
                                    "type": "call",
                                    "fun": "fluidRow",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "column",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": 12
                                          },
                                          {
                                            "type": "call",
                                            "fun": "h4",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "Monte Carlo Simulation"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "plotlyOutput",
                                            "args": {
                                              "1": {
                                                "type": "call",
                                                "fun": "ns",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "simulation_plot"
                                                  }
                                                ]
                                              },
                                              "height": {
                                                "type": "literal",
                                                "value": "500px"
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  "5": {
                                    "type": "call",
                                    "fun": "br",
                                    "args": []
                                  },
                                  "6": {
                                    "type": "call",
                                    "fun": "fluidRow",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "column",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": 6
                                          },
                                          {
                                            "type": "call",
                                            "fun": "h4",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "Target Achievement"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "plotOutput",
                                            "args": {
                                              "1": {
                                                "type": "call",
                                                "fun": "ns",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "target_achievement"
                                                  }
                                                ]
                                              },
                                              "height": {
                                                "type": "literal",
                                                "value": "350px"
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "column",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": 6
                                          },
                                          {
                                            "type": "call",
                                            "fun": "h4",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "Safety Metrics"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "plotOutput",
                                            "args": {
                                              "1": {
                                                "type": "call",
                                                "fun": "ns",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "safety_metrics"
                                                  }
                                                ]
                                              },
                                              "height": {
                                                "type": "literal",
                                                "value": "350px"
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  "7": {
                                    "type": "call",
                                    "fun": "br",
                                    "args": []
                                  },
                                  "8": {
                                    "type": "call",
                                    "fun": "verbatimTextOutput",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "ns",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "simulation_summary"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                }
                              }
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "mod_optimization_server"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "", ""]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "moduleServer",
                "args": [
                  {
                    "type": "name",
                    "value": "id"
                  },
                  {
                    "type": "call",
                    "fun": "function",
                    "args": [
                      {
                        "type": "pairlist",
                        "value": ["", "", ""]
                      },
                      {
                        "type": "call",
                        "fun": "{",
                        "args": [
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "name",
                                "value": "ns"
                              },
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "session"
                                  },
                                  {
                                    "type": "name",
                                    "value": "ns"
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "name",
                                "value": "optimization_results"
                              },
                              {
                                "type": "call",
                                "fun": "reactiveValues",
                                "args": {
                                  "optimal_dose": {
                                    "type": "NULL",
                                    "value": []
                                  },
                                  "regimen": {
                                    "type": "NULL",
                                    "value": []
                                  },
                                  "predictions": {
                                    "type": "NULL",
                                    "value": []
                                  },
                                  "probability": {
                                    "type": "NULL",
                                    "value": []
                                  },
                                  "simulation": {
                                    "type": "NULL",
                                    "value": []
                                  },
                                  "sensitivity": {
                                    "type": "NULL",
                                    "value": []
                                  }
                                }
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "observeEvent",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "input"
                                  },
                                  {
                                    "type": "name",
                                    "value": "optimize_dose"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "{",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "req",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "fit_results",
                                        "args": []
                                      }
                                    ]
                                  },
                                  {
                                    "type": "call",
                                    "fun": "req",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": ["$", "auth", "has_permission"],
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "edit"
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "call",
                                    "fun": "showNotification",
                                    "args": {
                                      "1": {
                                        "type": "literal",
                                        "value": "Running dose optimization..."
                                      },
                                      "type": {
                                        "type": "literal",
                                        "value": "message"
                                      },
                                      "id": {
                                        "type": "literal",
                                        "value": "opt_notification"
                                      }
                                    }
                                  },
                                  {
                                    "type": "call",
                                    "fun": "tryCatch",
                                    "args": {
                                      "1": {
                                        "type": "call",
                                        "fun": "{",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "<-",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "covariates"
                                              },
                                              {
                                                "type": "call",
                                                "fun": "list",
                                                "args": {
                                                  "weight": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "input"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "weight"
                                                      }
                                                    ]
                                                  },
                                                  "crcl": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "input"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "creatinine_clearance"
                                                      }
                                                    ]
                                                  },
                                                  "gender": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "input"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "gender"
                                                      }
                                                    ]
                                                  },
                                                  "age": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "input"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "age"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "<-",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "settings"
                                              },
                                              {
                                                "type": "call",
                                                "fun": "list",
                                                "args": {
                                                  "target_type": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "input"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "target_type"
                                                      }
                                                    ]
                                                  },
                                                  "target_value": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "input"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "target_value"
                                                      }
                                                    ]
                                                  },
                                                  "mic": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "input"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "mic_value"
                                                      }
                                                    ]
                                                  },
                                                  "route": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "input"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "route"
                                                      }
                                                    ]
                                                  },
                                                  "interval": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "input"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "dosing_interval"
                                                      }
                                                    ]
                                                  },
                                                  "n_doses": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "input"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "n_doses"
                                                      }
                                                    ]
                                                  },
                                                  "min_dose": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "input"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "min_dose"
                                                      }
                                                    ]
                                                  },
                                                  "max_dose": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "input"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "max_dose"
                                                      }
                                                    ]
                                                  },
                                                  "max_daily": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "input"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "max_daily_dose"
                                                      }
                                                    ]
                                                  },
                                                  "infusion_duration": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "input"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "infusion_duration"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "<-",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "opt_result"
                                              },
                                              {
                                                "type": "call",
                                                "fun": "optimize_dosing_regimen",
                                                "args": {
                                                  "model": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "fit_results",
                                                            "args": []
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "results"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "model"
                                                      }
                                                    ]
                                                  },
                                                  "parameters": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "fit_results",
                                                            "args": []
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "results"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "parameters"
                                                      }
                                                    ]
                                                  },
                                                  "covariates": {
                                                    "type": "name",
                                                    "value": "covariates"
                                                  },
                                                  "settings": {
                                                    "type": "name",
                                                    "value": "settings"
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "<-",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "optimization_results"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "optimal_dose"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "opt_result"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "optimal_dose"
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "<-",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "optimization_results"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "regimen"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "opt_result"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "regimen"
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "<-",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "optimization_results"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "predictions"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "opt_result"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "predictions"
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "<-",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "optimization_results"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "probability"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "opt_result"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "probability"
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "removeNotification",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "opt_notification"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "showNotification",
                                            "args": {
                                              "1": {
                                                "type": "literal",
                                                "value": "Optimization completed!"
                                              },
                                              "type": {
                                                "type": "literal",
                                                "value": "success"
                                              },
                                              "duration": {
                                                "type": "literal",
                                                "value": 5
                                              }
                                            }
                                          },
                                          {
                                            "type": "call",
                                            "fun": "log_audit_event",
                                            "args": {
                                              "event_type": {
                                                "type": "literal",
                                                "value": "DOSE_OPTIMIZATION"
                                              },
                                              "user": {
                                                "type": "call",
                                                "fun": ["$", "auth", "get_user"],
                                                "args": []
                                              },
                                              "details": {
                                                "type": "call",
                                                "fun": "list",
                                                "args": {
                                                  "target": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "input"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "target_type"
                                                      }
                                                    ]
                                                  },
                                                  "optimal_dose": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "opt_result"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "optimal_dose"
                                                      }
                                                    ]
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      "error": {
                                        "type": "call",
                                        "fun": "function",
                                        "args": [
                                          {
                                            "type": "pairlist",
                                            "value": ""
                                          },
                                          {
                                            "type": "call",
                                            "fun": "{",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "removeNotification",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "opt_notification"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "showNotification",
                                                "args": {
                                                  "1": {
                                                    "type": "call",
                                                    "fun": "paste",
                                                    "args": [
                                                      {
                                                        "type": "literal",
                                                        "value": "Error:"
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "e"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "message"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  },
                                                  "type": {
                                                    "type": "literal",
                                                    "value": "error"
                                                  },
                                                  "duration": {
                                                    "type": "NULL",
                                                    "value": []
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          {
                                            "type": "NULL",
                                            "value": []
                                          }
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "observeEvent",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "input"
                                  },
                                  {
                                    "type": "name",
                                    "value": "simulate_regimen"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "{",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "req",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "optimization_results"
                                          },
                                          {
                                            "type": "name",
                                            "value": "optimal_dose"
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "call",
                                    "fun": "showNotification",
                                    "args": {
                                      "1": {
                                        "type": "literal",
                                        "value": "Running Monte Carlo simulation..."
                                      },
                                      "type": {
                                        "type": "literal",
                                        "value": "message"
                                      },
                                      "id": {
                                        "type": "literal",
                                        "value": "sim_notification"
                                      }
                                    }
                                  },
                                  {
                                    "type": "call",
                                    "fun": "tryCatch",
                                    "args": {
                                      "1": {
                                        "type": "call",
                                        "fun": "{",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "<-",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "sim_result"
                                              },
                                              {
                                                "type": "call",
                                                "fun": "simulate_dosing_regimen",
                                                "args": {
                                                  "dose": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "optimization_results"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "optimal_dose"
                                                      }
                                                    ]
                                                  },
                                                  "regimen": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "optimization_results"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "regimen"
                                                      }
                                                    ]
                                                  },
                                                  "model": {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "fit_results",
                                                            "args": []
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "results"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "model"
                                                      }
                                                    ]
                                                  },
                                                  "n_sim": {
                                                    "type": "literal",
                                                    "value": 1000
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "<-",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "optimization_results"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "simulation"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "name",
                                                "value": "sim_result"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "removeNotification",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "sim_notification"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "showNotification",
                                            "args": {
                                              "1": {
                                                "type": "literal",
                                                "value": "Simulation completed!"
                                              },
                                              "type": {
                                                "type": "literal",
                                                "value": "success"
                                              },
                                              "duration": {
                                                "type": "literal",
                                                "value": 5
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      "error": {
                                        "type": "call",
                                        "fun": "function",
                                        "args": [
                                          {
                                            "type": "pairlist",
                                            "value": ""
                                          },
                                          {
                                            "type": "call",
                                            "fun": "{",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "removeNotification",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "sim_notification"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "showNotification",
                                                "args": {
                                                  "1": {
                                                    "type": "call",
                                                    "fun": "paste",
                                                    "args": [
                                                      {
                                                        "type": "literal",
                                                        "value": "Error:"
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "e"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "message"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  },
                                                  "type": {
                                                    "type": "literal",
                                                    "value": "error"
                                                  },
                                                  "duration": {
                                                    "type": "NULL",
                                                    "value": []
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          {
                                            "type": "NULL",
                                            "value": []
                                          }
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "optimal_dose_box"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "renderValueBox",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "valueBox",
                                        "args": {
                                          "value": {
                                            "type": "call",
                                            "fun": "ifelse",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "is.null",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "optimization_results"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "optimal_dose"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "literal",
                                                "value": "---"
                                              },
                                              {
                                                "type": "call",
                                                "fun": "paste0",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "round",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "optimization_results"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "optimal_dose"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": 0
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": " mg"
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          "subtitle": {
                                            "type": "literal",
                                            "value": "Optimal Dose"
                                          },
                                          "icon": {
                                            "type": "call",
                                            "fun": "icon",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "pills"
                                              }
                                            ]
                                          },
                                          "color": {
                                            "type": "literal",
                                            "value": "green"
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "predicted_target_box"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "renderValueBox",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "valueBox",
                                        "args": {
                                          "value": {
                                            "type": "call",
                                            "fun": "ifelse",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "is.null",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "optimization_results"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "predictions"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "literal",
                                                "value": "---"
                                              },
                                              {
                                                "type": "call",
                                                "fun": "paste0",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "round",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "$",
                                                            "args": [
                                                              {
                                                                "type": "name",
                                                                "value": "optimization_results"
                                                              },
                                                              {
                                                                "type": "name",
                                                                "value": "predictions"
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "target_value"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": 1
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          "subtitle": {
                                            "type": "call",
                                            "fun": "paste",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "Predicted"
                                              },
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "input"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "target_type"
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          "icon": {
                                            "type": "call",
                                            "fun": "icon",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "bullseye"
                                              }
                                            ]
                                          },
                                          "color": {
                                            "type": "literal",
                                            "value": "blue"
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "probability_box"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "renderValueBox",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "valueBox",
                                        "args": {
                                          "value": {
                                            "type": "call",
                                            "fun": "ifelse",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "is.null",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "optimization_results"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "probability"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "literal",
                                                "value": "---"
                                              },
                                              {
                                                "type": "call",
                                                "fun": "paste0",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "round",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "*",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "$",
                                                            "args": [
                                                              {
                                                                "type": "name",
                                                                "value": "optimization_results"
                                                              },
                                                              {
                                                                "type": "name",
                                                                "value": "probability"
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "type": "literal",
                                                            "value": 100
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": 1
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": "%"
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          "subtitle": {
                                            "type": "literal",
                                            "value": "Probability of Target"
                                          },
                                          "icon": {
                                            "type": "call",
                                            "fun": "icon",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "percentage"
                                              }
                                            ]
                                          },
                                          "color": {
                                            "type": "literal",
                                            "value": "purple"
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "regimen_table"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "renderTable",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "req",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "optimization_results"
                                              },
                                              {
                                                "type": "name",
                                                "value": "regimen"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "%>%",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "%>%",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "optimization_results"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "regimen"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "select",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "Dose_Number"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "Time_h"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "Dose_mg"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "Route"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "Duration_h"
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "head",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": 10
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "concentration_profile"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "renderPlotly",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "req",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "optimization_results"
                                              },
                                              {
                                                "type": "name",
                                                "value": "predictions"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "pred_data"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "optimization_results"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "predictions"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "name",
                                                "value": "profile"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "p"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "+",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "+",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "+",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "+",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "+",
                                                            "args": [
                                                              {
                                                                "type": "call",
                                                                "fun": "ggplot",
                                                                "args": [
                                                                  {
                                                                    "type": "name",
                                                                    "value": "pred_data"
                                                                  },
                                                                  {
                                                                    "type": "call",
                                                                    "fun": "aes",
                                                                    "args": {
                                                                      "x": {
                                                                        "type": "name",
                                                                        "value": "time"
                                                                      }
                                                                    }
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "type": "call",
                                                                "fun": "geom_line",
                                                                "args": {
                                                                  "1": {
                                                                    "type": "call",
                                                                    "fun": "aes",
                                                                    "args": {
                                                                      "y": {
                                                                        "type": "name",
                                                                        "value": "concentration"
                                                                      }
                                                                    }
                                                                  },
                                                                  "color": {
                                                                    "type": "literal",
                                                                    "value": "blue"
                                                                  },
                                                                  "size": {
                                                                    "type": "literal",
                                                                    "value": 1
                                                                  }
                                                                }
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "type": "call",
                                                            "fun": "geom_ribbon",
                                                            "args": {
                                                              "1": {
                                                                "type": "call",
                                                                "fun": "aes",
                                                                "args": {
                                                                  "ymin": {
                                                                    "type": "name",
                                                                    "value": "ci_lower"
                                                                  },
                                                                  "ymax": {
                                                                    "type": "name",
                                                                    "value": "ci_upper"
                                                                  }
                                                                }
                                                              },
                                                              "alpha": {
                                                                "type": "literal",
                                                                "value": 0.2
                                                              },
                                                              "fill": {
                                                                "type": "literal",
                                                                "value": "blue"
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "geom_hline",
                                                        "args": {
                                                          "yintercept": {
                                                            "type": "call",
                                                            "fun": "$",
                                                            "args": [
                                                              {
                                                                "type": "name",
                                                                "value": "input"
                                                              },
                                                              {
                                                                "type": "name",
                                                                "value": "target_value"
                                                              }
                                                            ]
                                                          },
                                                          "color": {
                                                            "type": "literal",
                                                            "value": "red"
                                                          },
                                                          "linetype": {
                                                            "type": "literal",
                                                            "value": "dashed"
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "labs",
                                                    "args": {
                                                      "x": {
                                                        "type": "literal",
                                                        "value": "Time (hours)"
                                                      },
                                                      "y": {
                                                        "type": "literal",
                                                        "value": "Concentration (mg/L)"
                                                      },
                                                      "title": {
                                                        "type": "literal",
                                                        "value": "Predicted Concentration-Time Profile"
                                                      }
                                                    }
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "theme_minimal",
                                                "args": []
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "ggplotly",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "p"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "dose_response_plot"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "renderPlotly",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "req",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "optimization_results"
                                              },
                                              {
                                                "type": "name",
                                                "value": "optimal_dose"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "doses"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "seq",
                                            "args": {
                                              "1": {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "input"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "min_dose"
                                                  }
                                                ]
                                              },
                                              "2": {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "input"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "max_dose"
                                                  }
                                                ]
                                              },
                                              "length.out": {
                                                "type": "literal",
                                                "value": 50
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "responses"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "sapply",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "doses"
                                              },
                                              {
                                                "type": "call",
                                                "fun": "function",
                                                "args": [
                                                  {
                                                    "type": "pairlist",
                                                    "value": ""
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "{",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "calculate_target_metric",
                                                        "args": {
                                                          "dose": {
                                                            "type": "name",
                                                            "value": "d"
                                                          },
                                                          "parameters": {
                                                            "type": "call",
                                                            "fun": "$",
                                                            "args": [
                                                              {
                                                                "type": "call",
                                                                "fun": "$",
                                                                "args": [
                                                                  {
                                                                    "type": "call",
                                                                    "fun": "fit_results",
                                                                    "args": []
                                                                  },
                                                                  {
                                                                    "type": "name",
                                                                    "value": "results"
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "type": "name",
                                                                "value": "parameters"
                                                              }
                                                            ]
                                                          },
                                                          "target_type": {
                                                            "type": "call",
                                                            "fun": "$",
                                                            "args": [
                                                              {
                                                                "type": "name",
                                                                "value": "input"
                                                              },
                                                              {
                                                                "type": "name",
                                                                "value": "target_type"
                                                              }
                                                            ]
                                                          },
                                                          "interval": {
                                                            "type": "call",
                                                            "fun": "$",
                                                            "args": [
                                                              {
                                                                "type": "name",
                                                                "value": "input"
                                                              },
                                                              {
                                                                "type": "name",
                                                                "value": "dosing_interval"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "NULL",
                                                    "value": []
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "dr_data"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "data.frame",
                                            "args": {
                                              "dose": {
                                                "type": "name",
                                                "value": "doses"
                                              },
                                              "response": {
                                                "type": "name",
                                                "value": "responses"
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "p"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "+",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "+",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "+",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "+",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "+",
                                                            "args": [
                                                              {
                                                                "type": "call",
                                                                "fun": "ggplot",
                                                                "args": [
                                                                  {
                                                                    "type": "name",
                                                                    "value": "dr_data"
                                                                  },
                                                                  {
                                                                    "type": "call",
                                                                    "fun": "aes",
                                                                    "args": {
                                                                      "x": {
                                                                        "type": "name",
                                                                        "value": "dose"
                                                                      },
                                                                      "y": {
                                                                        "type": "name",
                                                                        "value": "response"
                                                                      }
                                                                    }
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "type": "call",
                                                                "fun": "geom_line",
                                                                "args": {
                                                                  "color": {
                                                                    "type": "literal",
                                                                    "value": "blue"
                                                                  },
                                                                  "size": {
                                                                    "type": "literal",
                                                                    "value": 1
                                                                  }
                                                                }
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "type": "call",
                                                            "fun": "geom_vline",
                                                            "args": {
                                                              "xintercept": {
                                                                "type": "call",
                                                                "fun": "$",
                                                                "args": [
                                                                  {
                                                                    "type": "name",
                                                                    "value": "optimization_results"
                                                                  },
                                                                  {
                                                                    "type": "name",
                                                                    "value": "optimal_dose"
                                                                  }
                                                                ]
                                                              },
                                                              "color": {
                                                                "type": "literal",
                                                                "value": "red"
                                                              },
                                                              "linetype": {
                                                                "type": "literal",
                                                                "value": "dashed"
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "geom_hline",
                                                        "args": {
                                                          "yintercept": {
                                                            "type": "call",
                                                            "fun": "$",
                                                            "args": [
                                                              {
                                                                "type": "name",
                                                                "value": "input"
                                                              },
                                                              {
                                                                "type": "name",
                                                                "value": "target_value"
                                                              }
                                                            ]
                                                          },
                                                          "color": {
                                                            "type": "literal",
                                                            "value": "green"
                                                          },
                                                          "linetype": {
                                                            "type": "literal",
                                                            "value": "dashed"
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "labs",
                                                    "args": {
                                                      "x": {
                                                        "type": "literal",
                                                        "value": "Dose (mg)"
                                                      },
                                                      "y": {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "input"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "target_type"
                                                          }
                                                        ]
                                                      },
                                                      "title": {
                                                        "type": "literal",
                                                        "value": "Dose-Response Relationship"
                                                      }
                                                    }
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "theme_minimal",
                                                "args": []
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "ggplotly",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "p"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "dose_response_table"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": ["::", "DT", "renderDT"],
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "req",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "optimization_results"
                                              },
                                              {
                                                "type": "name",
                                                "value": "optimal_dose"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "dose_levels"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "*",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "c",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": 0.5
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 0.75
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 1
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 1.25
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 1.5
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "optimization_results"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "optimal_dose"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "dr_table"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "data.frame",
                                            "args": {
                                              "Dose_mg": {
                                                "type": "name",
                                                "value": "dose_levels"
                                              },
                                              "Target_Value": {
                                                "type": "call",
                                                "fun": "sapply",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "dose_levels"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "function",
                                                    "args": [
                                                      {
                                                        "type": "pairlist",
                                                        "value": ""
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "{",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "calculate_target_metric",
                                                            "args": {
                                                              "dose": {
                                                                "type": "name",
                                                                "value": "d"
                                                              },
                                                              "parameters": {
                                                                "type": "call",
                                                                "fun": "$",
                                                                "args": [
                                                                  {
                                                                    "type": "call",
                                                                    "fun": "$",
                                                                    "args": [
                                                                      {
                                                                        "type": "call",
                                                                        "fun": "fit_results",
                                                                        "args": []
                                                                      },
                                                                      {
                                                                        "type": "name",
                                                                        "value": "results"
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "type": "name",
                                                                    "value": "parameters"
                                                                  }
                                                                ]
                                                              },
                                                              "target_type": {
                                                                "type": "call",
                                                                "fun": "$",
                                                                "args": [
                                                                  {
                                                                    "type": "name",
                                                                    "value": "input"
                                                                  },
                                                                  {
                                                                    "type": "name",
                                                                    "value": "target_type"
                                                                  }
                                                                ]
                                                              },
                                                              "interval": {
                                                                "type": "call",
                                                                "fun": "$",
                                                                "args": [
                                                                  {
                                                                    "type": "name",
                                                                    "value": "input"
                                                                  },
                                                                  {
                                                                    "type": "name",
                                                                    "value": "dosing_interval"
                                                                  }
                                                                ]
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "NULL",
                                                        "value": []
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              "Probability": {
                                                "type": "call",
                                                "fun": "sapply",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "dose_levels"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "function",
                                                    "args": [
                                                      {
                                                        "type": "pairlist",
                                                        "value": ""
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "{",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "calculate_target_probability",
                                                            "args": {
                                                              "dose": {
                                                                "type": "name",
                                                                "value": "d"
                                                              },
                                                              "parameters": {
                                                                "type": "call",
                                                                "fun": "$",
                                                                "args": [
                                                                  {
                                                                    "type": "call",
                                                                    "fun": "$",
                                                                    "args": [
                                                                      {
                                                                        "type": "call",
                                                                        "fun": "fit_results",
                                                                        "args": []
                                                                      },
                                                                      {
                                                                        "type": "name",
                                                                        "value": "results"
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "type": "name",
                                                                    "value": "parameters"
                                                                  }
                                                                ]
                                                              },
                                                              "target_value": {
                                                                "type": "call",
                                                                "fun": "$",
                                                                "args": [
                                                                  {
                                                                    "type": "name",
                                                                    "value": "input"
                                                                  },
                                                                  {
                                                                    "type": "name",
                                                                    "value": "target_value"
                                                                  }
                                                                ]
                                                              },
                                                              "target_type": {
                                                                "type": "call",
                                                                "fun": "$",
                                                                "args": [
                                                                  {
                                                                    "type": "name",
                                                                    "value": "input"
                                                                  },
                                                                  {
                                                                    "type": "name",
                                                                    "value": "target_type"
                                                                  }
                                                                ]
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "NULL",
                                                        "value": []
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "%>%",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "%>%",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": ["::", "DT", "datatable"],
                                                "args": {
                                                  "1": {
                                                    "type": "name",
                                                    "value": "dr_table"
                                                  },
                                                  "options": {
                                                    "type": "call",
                                                    "fun": "list",
                                                    "args": {
                                                      "pageLength": {
                                                        "type": "literal",
                                                        "value": 5
                                                      }
                                                    }
                                                  },
                                                  "rownames": {
                                                    "type": "literal",
                                                    "value": false
                                                  }
                                                }
                                              },
                                              {
                                                "type": "call",
                                                "fun": ["::", "DT", "formatRound"],
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "c",
                                                    "args": [
                                                      {
                                                        "type": "literal",
                                                        "value": "Dose_mg"
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": "Target_Value"
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 1
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": ["::", "DT", "formatPercentage"],
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "Probability"
                                              },
                                              {
                                                "type": "literal",
                                                "value": 1
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "prob_target_plot"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "renderPlotly",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "req",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "optimization_results"
                                              },
                                              {
                                                "type": "name",
                                                "value": "optimal_dose"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "doses"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "seq",
                                            "args": {
                                              "1": {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "input"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "min_dose"
                                                  }
                                                ]
                                              },
                                              "2": {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "input"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "max_dose"
                                                  }
                                                ]
                                              },
                                              "length.out": {
                                                "type": "literal",
                                                "value": 50
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "probs"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "sapply",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "doses"
                                              },
                                              {
                                                "type": "call",
                                                "fun": "function",
                                                "args": [
                                                  {
                                                    "type": "pairlist",
                                                    "value": ""
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "{",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "calculate_target_probability",
                                                        "args": {
                                                          "dose": {
                                                            "type": "name",
                                                            "value": "d"
                                                          },
                                                          "parameters": {
                                                            "type": "call",
                                                            "fun": "$",
                                                            "args": [
                                                              {
                                                                "type": "call",
                                                                "fun": "$",
                                                                "args": [
                                                                  {
                                                                    "type": "call",
                                                                    "fun": "fit_results",
                                                                    "args": []
                                                                  },
                                                                  {
                                                                    "type": "name",
                                                                    "value": "results"
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "type": "name",
                                                                "value": "parameters"
                                                              }
                                                            ]
                                                          },
                                                          "target_value": {
                                                            "type": "call",
                                                            "fun": "$",
                                                            "args": [
                                                              {
                                                                "type": "name",
                                                                "value": "input"
                                                              },
                                                              {
                                                                "type": "name",
                                                                "value": "target_value"
                                                              }
                                                            ]
                                                          },
                                                          "target_type": {
                                                            "type": "call",
                                                            "fun": "$",
                                                            "args": [
                                                              {
                                                                "type": "name",
                                                                "value": "input"
                                                              },
                                                              {
                                                                "type": "name",
                                                                "value": "target_type"
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "NULL",
                                                    "value": []
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "prob_data"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "data.frame",
                                            "args": {
                                              "dose": {
                                                "type": "name",
                                                "value": "doses"
                                              },
                                              "probability": {
                                                "type": "call",
                                                "fun": "*",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "probs"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 100
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "p"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "+",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "+",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "+",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "+",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "+",
                                                            "args": [
                                                              {
                                                                "type": "call",
                                                                "fun": "ggplot",
                                                                "args": [
                                                                  {
                                                                    "type": "name",
                                                                    "value": "prob_data"
                                                                  },
                                                                  {
                                                                    "type": "call",
                                                                    "fun": "aes",
                                                                    "args": {
                                                                      "x": {
                                                                        "type": "name",
                                                                        "value": "dose"
                                                                      },
                                                                      "y": {
                                                                        "type": "name",
                                                                        "value": "probability"
                                                                      }
                                                                    }
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "type": "call",
                                                                "fun": "geom_line",
                                                                "args": {
                                                                  "color": {
                                                                    "type": "literal",
                                                                    "value": "purple"
                                                                  },
                                                                  "size": {
                                                                    "type": "literal",
                                                                    "value": 1
                                                                  }
                                                                }
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "type": "call",
                                                            "fun": "geom_vline",
                                                            "args": {
                                                              "xintercept": {
                                                                "type": "call",
                                                                "fun": "$",
                                                                "args": [
                                                                  {
                                                                    "type": "name",
                                                                    "value": "optimization_results"
                                                                  },
                                                                  {
                                                                    "type": "name",
                                                                    "value": "optimal_dose"
                                                                  }
                                                                ]
                                                              },
                                                              "color": {
                                                                "type": "literal",
                                                                "value": "red"
                                                              },
                                                              "linetype": {
                                                                "type": "literal",
                                                                "value": "dashed"
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "geom_hline",
                                                        "args": {
                                                          "yintercept": {
                                                            "type": "literal",
                                                            "value": 90
                                                          },
                                                          "color": {
                                                            "type": "literal",
                                                            "value": "green"
                                                          },
                                                          "linetype": {
                                                            "type": "literal",
                                                            "value": "dotted"
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "labs",
                                                    "args": {
                                                      "x": {
                                                        "type": "literal",
                                                        "value": "Dose (mg)"
                                                      },
                                                      "y": {
                                                        "type": "literal",
                                                        "value": "Probability of Target (%)"
                                                      },
                                                      "title": {
                                                        "type": "literal",
                                                        "value": "Probability of Achieving Target"
                                                      }
                                                    }
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "theme_minimal",
                                                "args": []
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "ggplotly",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "p"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "prob_distribution"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "renderPlot",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "req",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "optimization_results"
                                              },
                                              {
                                                "type": "name",
                                                "value": "simulation"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "+",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "+",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "+",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "+",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "+",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "ggplot",
                                                            "args": [
                                                              {
                                                                "type": "call",
                                                                "fun": "$",
                                                                "args": [
                                                                  {
                                                                    "type": "name",
                                                                    "value": "optimization_results"
                                                                  },
                                                                  {
                                                                    "type": "name",
                                                                    "value": "simulation"
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "type": "call",
                                                                "fun": "aes",
                                                                "args": {
                                                                  "x": {
                                                                    "type": "name",
                                                                    "value": "target_achieved"
                                                                  }
                                                                }
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "type": "call",
                                                            "fun": "geom_histogram",
                                                            "args": {
                                                              "1": {
                                                                "type": "call",
                                                                "fun": "aes",
                                                                "args": {
                                                                  "y": {
                                                                    "type": "name",
                                                                    "value": "..density.."
                                                                  }
                                                                }
                                                              },
                                                              "bins": {
                                                                "type": "literal",
                                                                "value": 30
                                                              },
                                                              "fill": {
                                                                "type": "literal",
                                                                "value": "lightblue"
                                                              },
                                                              "color": {
                                                                "type": "literal",
                                                                "value": "black"
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "geom_density",
                                                        "args": {
                                                          "color": {
                                                            "type": "literal",
                                                            "value": "red"
                                                          },
                                                          "size": {
                                                            "type": "literal",
                                                            "value": 1
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "geom_vline",
                                                    "args": {
                                                      "xintercept": {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "input"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "target_value"
                                                          }
                                                        ]
                                                      },
                                                      "color": {
                                                        "type": "literal",
                                                        "value": "green"
                                                      },
                                                      "linetype": {
                                                        "type": "literal",
                                                        "value": "dashed"
                                                      }
                                                    }
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "labs",
                                                "args": {
                                                  "x": {
                                                    "type": "call",
                                                    "fun": "paste",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "input"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "target_type"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": "Value"
                                                      }
                                                    ]
                                                  },
                                                  "y": {
                                                    "type": "literal",
                                                    "value": "Density"
                                                  },
                                                  "title": {
                                                    "type": "literal",
                                                    "value": "Distribution of Target Achievement"
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "theme_minimal",
                                            "args": []
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "sensitivity_tornado"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "renderPlot",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "req",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "fit_results",
                                                    "args": []
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "results"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "name",
                                                "value": "parameters"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "params"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "c",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "CL"
                                              },
                                              {
                                                "type": "literal",
                                                "value": "V"
                                              },
                                              {
                                                "type": "literal",
                                                "value": "Ka"
                                              },
                                              {
                                                "type": "literal",
                                                "value": "F"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "base_dose"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "%||%",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "optimization_results"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "optimal_dose"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "literal",
                                                "value": 500
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "tornado_data"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "data.frame",
                                            "args": {
                                              "parameter": {
                                                "type": "call",
                                                "fun": "rep",
                                                "args": {
                                                  "1": {
                                                    "type": "name",
                                                    "value": "params"
                                                  },
                                                  "each": {
                                                    "type": "literal",
                                                    "value": 2
                                                  }
                                                }
                                              },
                                              "variation": {
                                                "type": "call",
                                                "fun": "rep",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "c",
                                                    "args": [
                                                      {
                                                        "type": "literal",
                                                        "value": "Low"
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": "High"
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "length",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "params"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              "dose_change": {
                                                "type": "call",
                                                "fun": "runif",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "*",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "length",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "params"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": 2
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "-",
                                                    "args": [
                                                      {
                                                        "type": "literal",
                                                        "value": 50
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 50
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "+",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "+",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "+",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "+",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "+",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "+",
                                                            "args": [
                                                              {
                                                                "type": "call",
                                                                "fun": "ggplot",
                                                                "args": [
                                                                  {
                                                                    "type": "name",
                                                                    "value": "tornado_data"
                                                                  },
                                                                  {
                                                                    "type": "call",
                                                                    "fun": "aes",
                                                                    "args": {
                                                                      "x": {
                                                                        "type": "name",
                                                                        "value": "dose_change"
                                                                      },
                                                                      "y": {
                                                                        "type": "name",
                                                                        "value": "parameter"
                                                                      },
                                                                      "fill": {
                                                                        "type": "name",
                                                                        "value": "variation"
                                                                      }
                                                                    }
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "type": "call",
                                                                "fun": "geom_bar",
                                                                "args": {
                                                                  "stat": {
                                                                    "type": "literal",
                                                                    "value": "identity"
                                                                  },
                                                                  "position": {
                                                                    "type": "literal",
                                                                    "value": "identity"
                                                                  }
                                                                }
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "type": "call",
                                                            "fun": "geom_vline",
                                                            "args": {
                                                              "xintercept": {
                                                                "type": "literal",
                                                                "value": 0
                                                              },
                                                              "color": {
                                                                "type": "literal",
                                                                "value": "black"
                                                              },
                                                              "linetype": {
                                                                "type": "literal",
                                                                "value": "solid"
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "scale_fill_manual",
                                                        "args": {
                                                          "values": {
                                                            "type": "call",
                                                            "fun": "c",
                                                            "args": {
                                                              "Low": {
                                                                "type": "literal",
                                                                "value": "red"
                                                              },
                                                              "High": {
                                                                "type": "literal",
                                                                "value": "green"
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "labs",
                                                    "args": {
                                                      "x": {
                                                        "type": "literal",
                                                        "value": "Change in Optimal Dose (mg)"
                                                      },
                                                      "y": {
                                                        "type": "literal",
                                                        "value": "Parameter"
                                                      },
                                                      "title": {
                                                        "type": "literal",
                                                        "value": "Sensitivity Analysis - Tornado Plot"
                                                      }
                                                    }
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "theme_minimal",
                                                "args": []
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "theme",
                                            "args": {
                                              "legend.position": {
                                                "type": "literal",
                                                "value": "bottom"
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "covariate_effects"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "renderPlot",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "req",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "optimization_results"
                                              },
                                              {
                                                "type": "name",
                                                "value": "optimal_dose"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "covariates"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "c",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "Weight"
                                              },
                                              {
                                                "type": "literal",
                                                "value": "CrCL"
                                              },
                                              {
                                                "type": "literal",
                                                "value": "Age"
                                              },
                                              {
                                                "type": "literal",
                                                "value": "Gender"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "effects"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "c",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": 1.2
                                              },
                                              {
                                                "type": "literal",
                                                "value": 0.8
                                              },
                                              {
                                                "type": "literal",
                                                "value": 0.95
                                              },
                                              {
                                                "type": "literal",
                                                "value": 1.05
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "cov_data"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "data.frame",
                                            "args": {
                                              "covariate": {
                                                "type": "name",
                                                "value": "covariates"
                                              },
                                              "effect": {
                                                "type": "name",
                                                "value": "effects"
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "+",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "+",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "+",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "+",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "+",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "ggplot",
                                                            "args": [
                                                              {
                                                                "type": "name",
                                                                "value": "cov_data"
                                                              },
                                                              {
                                                                "type": "call",
                                                                "fun": "aes",
                                                                "args": {
                                                                  "x": {
                                                                    "type": "name",
                                                                    "value": "covariate"
                                                                  },
                                                                  "y": {
                                                                    "type": "name",
                                                                    "value": "effect"
                                                                  }
                                                                }
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "type": "call",
                                                            "fun": "geom_point",
                                                            "args": {
                                                              "size": {
                                                                "type": "literal",
                                                                "value": 4
                                                              },
                                                              "color": {
                                                                "type": "literal",
                                                                "value": "blue"
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "geom_hline",
                                                        "args": {
                                                          "yintercept": {
                                                            "type": "literal",
                                                            "value": 1
                                                          },
                                                          "color": {
                                                            "type": "literal",
                                                            "value": "red"
                                                          },
                                                          "linetype": {
                                                            "type": "literal",
                                                            "value": "dashed"
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "geom_errorbar",
                                                    "args": {
                                                      "1": {
                                                        "type": "call",
                                                        "fun": "aes",
                                                        "args": {
                                                          "ymin": {
                                                            "type": "call",
                                                            "fun": "-",
                                                            "args": [
                                                              {
                                                                "type": "name",
                                                                "value": "effect"
                                                              },
                                                              {
                                                                "type": "literal",
                                                                "value": 0.1
                                                              }
                                                            ]
                                                          },
                                                          "ymax": {
                                                            "type": "call",
                                                            "fun": "+",
                                                            "args": [
                                                              {
                                                                "type": "name",
                                                                "value": "effect"
                                                              },
                                                              {
                                                                "type": "literal",
                                                                "value": 0.1
                                                              }
                                                            ]
                                                          }
                                                        }
                                                      },
                                                      "width": {
                                                        "type": "literal",
                                                        "value": 0.2
                                                      }
                                                    }
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "labs",
                                                "args": {
                                                  "x": {
                                                    "type": "literal",
                                                    "value": "Covariate"
                                                  },
                                                  "y": {
                                                    "type": "literal",
                                                    "value": "Relative Effect on Dose"
                                                  },
                                                  "title": {
                                                    "type": "literal",
                                                    "value": "Covariate Effects on Optimal Dose"
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "theme_minimal",
                                            "args": []
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "sensitivity_table"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": ["::", "DT", "renderDT"],
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "req",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "optimization_results"
                                              },
                                              {
                                                "type": "name",
                                                "value": "optimal_dose"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "sens_table"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "data.frame",
                                            "args": {
                                              "Parameter": {
                                                "type": "call",
                                                "fun": "c",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "CL"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": "V"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": "Ka"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": "F"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": "Weight"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": "CrCL"
                                                  }
                                                ]
                                              },
                                              "Base_Value": {
                                                "type": "call",
                                                "fun": "c",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": 5
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 50
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 1
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 0.8
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 70
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 100
                                                  }
                                                ]
                                              },
                                              "Low_Value": {
                                                "type": "call",
                                                "fun": "c",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": 4
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 40
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 0.8
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 0.6
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 50
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 50
                                                  }
                                                ]
                                              },
                                              "High_Value": {
                                                "type": "call",
                                                "fun": "c",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": 6
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 60
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 1.2
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 1
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 90
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 150
                                                  }
                                                ]
                                              },
                                              "Dose_at_Low": {
                                                "type": "call",
                                                "fun": "c",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": 450
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 480
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 490
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 470
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 460
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 550
                                                  }
                                                ]
                                              },
                                              "Dose_at_High": {
                                                "type": "call",
                                                "fun": "c",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": 550
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 520
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 510
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 530
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 540
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 450
                                                  }
                                                ]
                                              },
                                              "Sensitivity": {
                                                "type": "call",
                                                "fun": "c",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "High"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": "Medium"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": "Low"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": "Medium"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": "Medium"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": "High"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": ["::", "DT", "datatable"],
                                        "args": {
                                          "1": {
                                            "type": "name",
                                            "value": "sens_table"
                                          },
                                          "options": {
                                            "type": "call",
                                            "fun": "list",
                                            "args": {
                                              "pageLength": {
                                                "type": "literal",
                                                "value": 10
                                              }
                                            }
                                          },
                                          "rownames": {
                                            "type": "literal",
                                            "value": false
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "simulation_plot"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "renderPlotly",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "req",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "optimization_results"
                                              },
                                              {
                                                "type": "name",
                                                "value": "simulation"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "sim_data"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "optimization_results"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "simulation"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "name",
                                                "value": "profiles"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "p"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "+",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "+",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "+",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "+",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "+",
                                                            "args": [
                                                              {
                                                                "type": "call",
                                                                "fun": "ggplot",
                                                                "args": [
                                                                  {
                                                                    "type": "name",
                                                                    "value": "sim_data"
                                                                  },
                                                                  {
                                                                    "type": "call",
                                                                    "fun": "aes",
                                                                    "args": {
                                                                      "x": {
                                                                        "type": "name",
                                                                        "value": "time"
                                                                      },
                                                                      "y": {
                                                                        "type": "name",
                                                                        "value": "concentration"
                                                                      },
                                                                      "group": {
                                                                        "type": "name",
                                                                        "value": "sim_id"
                                                                      }
                                                                    }
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "type": "call",
                                                                "fun": "geom_line",
                                                                "args": {
                                                                  "alpha": {
                                                                    "type": "literal",
                                                                    "value": 0.1
                                                                  },
                                                                  "color": {
                                                                    "type": "literal",
                                                                    "value": "gray"
                                                                  }
                                                                }
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "type": "call",
                                                            "fun": "geom_line",
                                                            "args": {
                                                              "data": {
                                                                "type": "call",
                                                                "fun": "%>%",
                                                                "args": [
                                                                  {
                                                                    "type": "call",
                                                                    "fun": "%>%",
                                                                    "args": [
                                                                      {
                                                                        "type": "name",
                                                                        "value": "sim_data"
                                                                      },
                                                                      {
                                                                        "type": "call",
                                                                        "fun": "group_by",
                                                                        "args": [
                                                                          {
                                                                            "type": "name",
                                                                            "value": "time"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "type": "call",
                                                                    "fun": "summarise",
                                                                    "args": {
                                                                      "concentration": {
                                                                        "type": "call",
                                                                        "fun": "median",
                                                                        "args": [
                                                                          {
                                                                            "type": "name",
                                                                            "value": "concentration"
                                                                          }
                                                                        ]
                                                                      }
                                                                    }
                                                                  }
                                                                ]
                                                              },
                                                              "2": {
                                                                "type": "call",
                                                                "fun": "aes",
                                                                "args": {
                                                                  "group": {
                                                                    "type": "NULL",
                                                                    "value": []
                                                                  }
                                                                }
                                                              },
                                                              "color": {
                                                                "type": "literal",
                                                                "value": "blue"
                                                              },
                                                              "size": {
                                                                "type": "literal",
                                                                "value": 1.5
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "scale_y_log10",
                                                        "args": []
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "labs",
                                                    "args": {
                                                      "x": {
                                                        "type": "literal",
                                                        "value": "Time (hours)"
                                                      },
                                                      "y": {
                                                        "type": "literal",
                                                        "value": "Concentration (mg/L)"
                                                      },
                                                      "title": {
                                                        "type": "literal",
                                                        "value": "Monte Carlo Simulation (1000 virtual patients)"
                                                      }
                                                    }
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "theme_minimal",
                                                "args": []
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "ggplotly",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "p"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "target_achievement"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "renderPlot",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "req",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "optimization_results"
                                              },
                                              {
                                                "type": "name",
                                                "value": "simulation"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "achievement_data"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "optimization_results"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "simulation"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "name",
                                                "value": "target_achievement"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "+",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "+",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "+",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "+",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "ggplot",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "achievement_data"
                                                          },
                                                          {
                                                            "type": "call",
                                                            "fun": "aes",
                                                            "args": {
                                                              "x": {
                                                                "type": "name",
                                                                "value": "achieved"
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "geom_bar",
                                                        "args": {
                                                          "1": {
                                                            "type": "call",
                                                            "fun": "aes",
                                                            "args": {
                                                              "y": {
                                                                "type": "name",
                                                                "value": "..prop.."
                                                              }
                                                            }
                                                          },
                                                          "fill": {
                                                            "type": "literal",
                                                            "value": "green"
                                                          },
                                                          "alpha": {
                                                            "type": "literal",
                                                            "value": 0.7
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "scale_y_continuous",
                                                    "args": {
                                                      "labels": {
                                                        "type": "call",
                                                        "fun": "::",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "scales"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "percent"
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "labs",
                                                "args": {
                                                  "x": {
                                                    "type": "literal",
                                                    "value": "Target Achieved"
                                                  },
                                                  "y": {
                                                    "type": "literal",
                                                    "value": "Proportion of Patients"
                                                  },
                                                  "title": {
                                                    "type": "literal",
                                                    "value": "Target Achievement Rate"
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "theme_minimal",
                                            "args": []
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "safety_metrics"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "renderPlot",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "req",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "optimization_results"
                                              },
                                              {
                                                "type": "name",
                                                "value": "simulation"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "safety_data"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "data.frame",
                                            "args": {
                                              "metric": {
                                                "type": "call",
                                                "fun": "c",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": "Cmax > Toxic"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": "AUC > Upper Limit"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": "Cmin < Therapeutic"
                                                  }
                                                ]
                                              },
                                              "percentage": {
                                                "type": "call",
                                                "fun": "c",
                                                "args": [
                                                  {
                                                    "type": "literal",
                                                    "value": 5
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 8
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 12
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "+",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "+",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "+",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "+",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "+",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "ggplot",
                                                            "args": [
                                                              {
                                                                "type": "name",
                                                                "value": "safety_data"
                                                              },
                                                              {
                                                                "type": "call",
                                                                "fun": "aes",
                                                                "args": {
                                                                  "x": {
                                                                    "type": "name",
                                                                    "value": "metric"
                                                                  },
                                                                  "y": {
                                                                    "type": "name",
                                                                    "value": "percentage"
                                                                  }
                                                                }
                                                              }
                                                            ]
                                                          },
                                                          {
                                                            "type": "call",
                                                            "fun": "geom_bar",
                                                            "args": {
                                                              "stat": {
                                                                "type": "literal",
                                                                "value": "identity"
                                                              },
                                                              "fill": {
                                                                "type": "call",
                                                                "fun": "c",
                                                                "args": [
                                                                  {
                                                                    "type": "literal",
                                                                    "value": "red"
                                                                  },
                                                                  {
                                                                    "type": "literal",
                                                                    "value": "orange"
                                                                  },
                                                                  {
                                                                    "type": "literal",
                                                                    "value": "yellow"
                                                                  }
                                                                ]
                                                              }
                                                            }
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "geom_hline",
                                                        "args": {
                                                          "yintercept": {
                                                            "type": "literal",
                                                            "value": 10
                                                          },
                                                          "color": {
                                                            "type": "literal",
                                                            "value": "red"
                                                          },
                                                          "linetype": {
                                                            "type": "literal",
                                                            "value": "dashed"
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "labs",
                                                    "args": {
                                                      "x": {
                                                        "type": "literal",
                                                        "value": "Safety Metric"
                                                      },
                                                      "y": {
                                                        "type": "literal",
                                                        "value": "Percentage of Patients (%)"
                                                      },
                                                      "title": {
                                                        "type": "literal",
                                                        "value": "Safety Analysis"
                                                      }
                                                    }
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "theme_minimal",
                                                "args": []
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "theme",
                                            "args": {
                                              "axis.text.x": {
                                                "type": "call",
                                                "fun": "element_text",
                                                "args": {
                                                  "angle": {
                                                    "type": "literal",
                                                    "value": 45
                                                  },
                                                  "hjust": {
                                                    "type": "literal",
                                                    "value": 1
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "output"
                                  },
                                  {
                                    "type": "name",
                                    "value": "simulation_summary"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "renderPrint",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "req",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "optimization_results"
                                              },
                                              {
                                                "type": "name",
                                                "value": "simulation"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "cat",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "Monte Carlo Simulation Summary\n"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "cat",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "==============================\n\n"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "cat",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "Number of simulations:"
                                          },
                                          {
                                            "type": "literal",
                                            "value": 1000
                                          },
                                          {
                                            "type": "literal",
                                            "value": "\n"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "cat",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "Optimal dose:"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "optimization_results"
                                              },
                                              {
                                                "type": "name",
                                                "value": "optimal_dose"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "literal",
                                            "value": "mg\n"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "cat",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "Dosing interval:"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "input"
                                              },
                                              {
                                                "type": "name",
                                                "value": "dosing_interval"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "literal",
                                            "value": "hours\n"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "cat",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "\nTarget Achievement:\n"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "cat",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "  - Target:"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "input"
                                              },
                                              {
                                                "type": "name",
                                                "value": "target_type"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "literal",
                                            "value": "="
                                          },
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "input"
                                              },
                                              {
                                                "type": "name",
                                                "value": "target_value"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "literal",
                                            "value": "\n"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "cat",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "  - Achievement rate:"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "round",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "*",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "$",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "optimization_results"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "probability"
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": 100
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "literal",
                                                "value": 1
                                              }
                                            ]
                                          },
                                          {
                                            "type": "literal",
                                            "value": "%\n"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "cat",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "\nSafety Metrics:\n"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "cat",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "  - Patients with Cmax > toxic limit: 5%\n"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "cat",
                                        "args": [
                                          {
                                            "type": "literal",
                                            "value": "  - Patients with subtherapeutic levels: 12%\n"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "return",
                            "args": [
                              {
                                "type": "call",
                                "fun": "reactive",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "optimization_results"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "NULL",
                        "value": []
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "optimize_dosing_regimen"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "", "", ""]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "optimal_dose"
                  },
                  {
                    "type": "call",
                    "fun": "*",
                    "args": [
                      {
                        "type": "call",
                        "fun": "*",
                        "args": [
                          {
                            "type": "literal",
                            "value": 500
                          },
                          {
                            "type": "call",
                            "fun": "(",
                            "args": [
                              {
                                "type": "call",
                                "fun": "/",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "covariates"
                                      },
                                      {
                                        "type": "name",
                                        "value": "weight"
                                      }
                                    ]
                                  },
                                  {
                                    "type": "literal",
                                    "value": 70
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "(",
                        "args": [
                          {
                            "type": "call",
                            "fun": "/",
                            "args": [
                              {
                                "type": "literal",
                                "value": 100
                              },
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "covariates"
                                  },
                                  {
                                    "type": "name",
                                    "value": "crcl"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "optimal_dose"
                  },
                  {
                    "type": "call",
                    "fun": "max",
                    "args": [
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "name",
                            "value": "settings"
                          },
                          {
                            "type": "name",
                            "value": "min_dose"
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "min",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "settings"
                              },
                              {
                                "type": "name",
                                "value": "max_dose"
                              }
                            ]
                          },
                          {
                            "type": "name",
                            "value": "optimal_dose"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "list",
                "args": {
                  "optimal_dose": {
                    "type": "name",
                    "value": "optimal_dose"
                  },
                  "regimen": {
                    "type": "call",
                    "fun": "data.frame",
                    "args": {
                      "Dose_Number": {
                        "type": "call",
                        "fun": ":",
                        "args": [
                          {
                            "type": "literal",
                            "value": 1
                          },
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "settings"
                              },
                              {
                                "type": "name",
                                "value": "n_doses"
                              }
                            ]
                          }
                        ]
                      },
                      "Time_h": {
                        "type": "call",
                        "fun": "*",
                        "args": [
                          {
                            "type": "call",
                            "fun": "(",
                            "args": [
                              {
                                "type": "call",
                                "fun": ":",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": 0
                                  },
                                  {
                                    "type": "call",
                                    "fun": "(",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "-",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "$",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "settings"
                                              },
                                              {
                                                "type": "name",
                                                "value": "n_doses"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "literal",
                                            "value": 1
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "settings"
                              },
                              {
                                "type": "name",
                                "value": "interval"
                              }
                            ]
                          }
                        ]
                      },
                      "Dose_mg": {
                        "type": "call",
                        "fun": "rep",
                        "args": [
                          {
                            "type": "name",
                            "value": "optimal_dose"
                          },
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "settings"
                              },
                              {
                                "type": "name",
                                "value": "n_doses"
                              }
                            ]
                          }
                        ]
                      },
                      "Route": {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "name",
                            "value": "settings"
                          },
                          {
                            "type": "name",
                            "value": "route"
                          }
                        ]
                      },
                      "Duration_h": {
                        "type": "call",
                        "fun": "ifelse",
                        "args": [
                          {
                            "type": "call",
                            "fun": "==",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "settings"
                                  },
                                  {
                                    "type": "name",
                                    "value": "route"
                                  }
                                ]
                              },
                              {
                                "type": "literal",
                                "value": "iv_infusion"
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "settings"
                              },
                              {
                                "type": "name",
                                "value": "infusion_duration"
                              }
                            ]
                          },
                          {
                            "type": "literal",
                            "value": 0
                          }
                        ]
                      }
                    }
                  },
                  "predictions": {
                    "type": "call",
                    "fun": "list",
                    "args": {
                      "target_value": {
                        "type": "call",
                        "fun": "*",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "settings"
                              },
                              {
                                "type": "name",
                                "value": "target_value"
                              }
                            ]
                          },
                          {
                            "type": "literal",
                            "value": 1.05
                          }
                        ]
                      },
                      "profile": {
                        "type": "call",
                        "fun": "data.frame",
                        "args": {
                          "time": {
                            "type": "call",
                            "fun": "seq",
                            "args": {
                              "1": {
                                "type": "literal",
                                "value": 0
                              },
                              "2": {
                                "type": "call",
                                "fun": "*",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "settings"
                                      },
                                      {
                                        "type": "name",
                                        "value": "n_doses"
                                      }
                                    ]
                                  },
                                  {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "settings"
                                      },
                                      {
                                        "type": "name",
                                        "value": "interval"
                                      }
                                    ]
                                  }
                                ]
                              },
                              "by": {
                                "type": "literal",
                                "value": 0.5
                              }
                            }
                          },
                          "concentration": {
                            "type": "call",
                            "fun": "exp",
                            "args": [
                              {
                                "type": "call",
                                "fun": "rnorm",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "length",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "seq",
                                        "args": {
                                          "1": {
                                            "type": "literal",
                                            "value": 0
                                          },
                                          "2": {
                                            "type": "call",
                                            "fun": "*",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "settings"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "n_doses"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "settings"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "interval"
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          "by": {
                                            "type": "literal",
                                            "value": 0.5
                                          }
                                        }
                                      }
                                    ]
                                  },
                                  {
                                    "type": "literal",
                                    "value": 3
                                  },
                                  {
                                    "type": "literal",
                                    "value": 0.5
                                  }
                                ]
                              }
                            ]
                          },
                          "ci_lower": {
                            "type": "call",
                            "fun": "exp",
                            "args": [
                              {
                                "type": "call",
                                "fun": "rnorm",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "length",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "seq",
                                        "args": {
                                          "1": {
                                            "type": "literal",
                                            "value": 0
                                          },
                                          "2": {
                                            "type": "call",
                                            "fun": "*",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "settings"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "n_doses"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "settings"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "interval"
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          "by": {
                                            "type": "literal",
                                            "value": 0.5
                                          }
                                        }
                                      }
                                    ]
                                  },
                                  {
                                    "type": "literal",
                                    "value": 2.5
                                  },
                                  {
                                    "type": "literal",
                                    "value": 0.5
                                  }
                                ]
                              }
                            ]
                          },
                          "ci_upper": {
                            "type": "call",
                            "fun": "exp",
                            "args": [
                              {
                                "type": "call",
                                "fun": "rnorm",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "length",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "seq",
                                        "args": {
                                          "1": {
                                            "type": "literal",
                                            "value": 0
                                          },
                                          "2": {
                                            "type": "call",
                                            "fun": "*",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "settings"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "n_doses"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "settings"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "interval"
                                                  }
                                                ]
                                              }
                                            ]
                                          },
                                          "by": {
                                            "type": "literal",
                                            "value": 0.5
                                          }
                                        }
                                      }
                                    ]
                                  },
                                  {
                                    "type": "literal",
                                    "value": 3.5
                                  },
                                  {
                                    "type": "literal",
                                    "value": 0.5
                                  }
                                ]
                              }
                            ]
                          }
                        }
                      }
                    }
                  },
                  "probability": {
                    "type": "literal",
                    "value": 0.92
                  }
                }
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "simulate_dosing_regimen"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "", "", ""]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "list",
                "args": {
                  "profiles": {
                    "type": "call",
                    "fun": "data.frame",
                    "args": {
                      "sim_id": {
                        "type": "call",
                        "fun": "rep",
                        "args": {
                          "1": {
                            "type": "call",
                            "fun": ":",
                            "args": [
                              {
                                "type": "literal",
                                "value": 1
                              },
                              {
                                "type": "name",
                                "value": "n_sim"
                              }
                            ]
                          },
                          "each": {
                            "type": "literal",
                            "value": 48
                          }
                        }
                      },
                      "time": {
                        "type": "call",
                        "fun": "rep",
                        "args": [
                          {
                            "type": "call",
                            "fun": "seq",
                            "args": [
                              {
                                "type": "literal",
                                "value": 0
                              },
                              {
                                "type": "literal",
                                "value": 47
                              }
                            ]
                          },
                          {
                            "type": "name",
                            "value": "n_sim"
                          }
                        ]
                      },
                      "concentration": {
                        "type": "call",
                        "fun": "exp",
                        "args": [
                          {
                            "type": "call",
                            "fun": "rnorm",
                            "args": [
                              {
                                "type": "call",
                                "fun": "*",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": 48
                                  },
                                  {
                                    "type": "name",
                                    "value": "n_sim"
                                  }
                                ]
                              },
                              {
                                "type": "literal",
                                "value": 3
                              },
                              {
                                "type": "literal",
                                "value": 1
                              }
                            ]
                          }
                        ]
                      }
                    }
                  },
                  "target_achievement": {
                    "type": "call",
                    "fun": "data.frame",
                    "args": {
                      "achieved": {
                        "type": "call",
                        "fun": "sample",
                        "args": {
                          "1": {
                            "type": "call",
                            "fun": "c",
                            "args": [
                              {
                                "type": "literal",
                                "value": true
                              },
                              {
                                "type": "literal",
                                "value": false
                              }
                            ]
                          },
                          "2": {
                            "type": "name",
                            "value": "n_sim"
                          },
                          "replace": {
                            "type": "literal",
                            "value": true
                          },
                          "prob": {
                            "type": "call",
                            "fun": "c",
                            "args": [
                              {
                                "type": "literal",
                                "value": 0.92
                              },
                              {
                                "type": "literal",
                                "value": 0.08
                              }
                            ]
                          }
                        }
                      }
                    }
                  },
                  "target_achieved": {
                    "type": "call",
                    "fun": "rnorm",
                    "args": [
                      {
                        "type": "name",
                        "value": "n_sim"
                      },
                      {
                        "type": "literal",
                        "value": 400
                      },
                      {
                        "type": "literal",
                        "value": 50
                      }
                    ]
                  }
                }
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "calculate_target_metric"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "", "", ""]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "base_value"
                  },
                  {
                    "type": "call",
                    "fun": "switch",
                    "args": {
                      "1": {
                        "type": "name",
                        "value": "target_type"
                      },
                      "auc": {
                        "type": "call",
                        "fun": "*",
                        "args": [
                          {
                            "type": "name",
                            "value": "dose"
                          },
                          {
                            "type": "literal",
                            "value": 10
                          }
                        ]
                      },
                      "cmax": {
                        "type": "call",
                        "fun": "/",
                        "args": [
                          {
                            "type": "name",
                            "value": "dose"
                          },
                          {
                            "type": "literal",
                            "value": 10
                          }
                        ]
                      },
                      "cmin": {
                        "type": "call",
                        "fun": "/",
                        "args": [
                          {
                            "type": "name",
                            "value": "dose"
                          },
                          {
                            "type": "literal",
                            "value": 50
                          }
                        ]
                      },
                      "time_above_mic": {
                        "type": "call",
                        "fun": "/",
                        "args": [
                          {
                            "type": "name",
                            "value": "dose"
                          },
                          {
                            "type": "literal",
                            "value": 5
                          }
                        ]
                      },
                      "auc_mic_ratio": {
                        "type": "call",
                        "fun": "*",
                        "args": [
                          {
                            "type": "name",
                            "value": "dose"
                          },
                          {
                            "type": "literal",
                            "value": 5
                          }
                        ]
                      }
                    }
                  }
                ]
              },
              {
                "type": "call",
                "fun": "*",
                "args": [
                  {
                    "type": "name",
                    "value": "base_value"
                  },
                  {
                    "type": "call",
                    "fun": "rnorm",
                    "args": [
                      {
                        "type": "literal",
                        "value": 1
                      },
                      {
                        "type": "literal",
                        "value": 1
                      },
                      {
                        "type": "literal",
                        "value": 0.1
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "calculate_target_probability"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "", "", ""]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "metric"
                  },
                  {
                    "type": "call",
                    "fun": "calculate_target_metric",
                    "args": [
                      {
                        "type": "name",
                        "value": "dose"
                      },
                      {
                        "type": "name",
                        "value": "parameters"
                      },
                      {
                        "type": "name",
                        "value": "target_type"
                      },
                      {
                        "type": "literal",
                        "value": 12
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "pnorm",
                "args": [
                  {
                    "type": "name",
                    "value": "metric"
                  },
                  {
                    "type": "name",
                    "value": "target_value"
                  },
                  {
                    "type": "call",
                    "fun": "*",
                    "args": [
                      {
                        "type": "name",
                        "value": "target_value"
                      },
                      {
                        "type": "literal",
                        "value": 0.2
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  }
]
