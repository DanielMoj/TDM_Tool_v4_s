[
  {
    "type": "call",
    "fun": "if",
    "args": [
      {
        "type": "call",
        "fun": "file.exists",
        "args": [
          {
            "type": "literal",
            "value": "R/parallel_utils.R"
          }
        ]
      },
      {
        "type": "call",
        "fun": "{",
        "args": [
          {
            "type": "call",
            "fun": "source",
            "args": [
              {
                "type": "literal",
                "value": "parallel_utils.R"
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "ss_window"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "20", "0.05"]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "list",
                "args": {
                  "times": {
                    "type": "call",
                    "fun": "seq",
                    "args": {
                      "1": {
                        "type": "literal",
                        "value": 0
                      },
                      "2": {
                        "type": "call",
                        "fun": "*",
                        "args": [
                          {
                            "type": "name",
                            "value": "n_intervals"
                          },
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "regimen"
                              },
                              {
                                "type": "name",
                                "value": "tau"
                              }
                            ]
                          }
                        ]
                      },
                      "by": {
                        "type": "name",
                        "value": "dt"
                      }
                    }
                  },
                  "t_end": {
                    "type": "call",
                    "fun": "*",
                    "args": [
                      {
                        "type": "name",
                        "value": "n_intervals"
                      },
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "name",
                            "value": "regimen"
                          },
                          {
                            "type": "name",
                            "value": "tau"
                          }
                        ]
                      }
                    ]
                  }
                }
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "compute_metrics_for_draw"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "", "", ""]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "n_intervals"
                  },
                  {
                    "type": "literal",
                    "value": 20
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "win"
                  },
                  {
                    "type": "call",
                    "fun": "ss_window",
                    "args": {
                      "1": {
                        "type": "name",
                        "value": "regimen"
                      },
                      "n_intervals": {
                        "type": "name",
                        "value": "n_intervals"
                      }
                    }
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "conc"
                  },
                  {
                    "type": "call",
                    "fun": "predict_conc_grid",
                    "args": [
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "name",
                            "value": "win"
                          },
                          {
                            "type": "name",
                            "value": "times"
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "list",
                        "args": {
                          "dose": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "regimen"
                              },
                              {
                                "type": "name",
                                "value": "dose"
                              }
                            ]
                          },
                          "tau": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "regimen"
                              },
                              {
                                "type": "name",
                                "value": "tau"
                              }
                            ]
                          },
                          "tinf": {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "regimen"
                              },
                              {
                                "type": "name",
                                "value": "tinf"
                              }
                            ]
                          },
                          "n_doses": {
                            "type": "name",
                            "value": "n_intervals"
                          },
                          "start_time": {
                            "type": "literal",
                            "value": 0
                          }
                        }
                      },
                      {
                        "type": "name",
                        "value": "theta"
                      },
                      {
                        "type": "name",
                        "value": "model_type"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "drg"
                  },
                  {
                    "type": "call",
                    "fun": "getOption",
                    "args": {
                      "1": {
                        "type": "literal",
                        "value": "current_drug_name"
                      },
                      "default": {
                        "type": "literal",
                        "value": "Drug"
                      }
                    }
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "st"
                  },
                  {
                    "type": "call",
                    "fun": "getOption",
                    "args": {
                      "1": {
                        "type": "literal",
                        "value": "current_site_name"
                      },
                      "default": {
                        "type": "literal",
                        "value": "Plasma"
                      }
                    }
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "conc"
                  },
                  {
                    "type": "call",
                    "fun": "apply_site_penetration",
                    "args": [
                      {
                        "type": "name",
                        "value": "conc"
                      },
                      {
                        "type": "name",
                        "value": "drg"
                      },
                      {
                        "type": "name",
                        "value": "st"
                      },
                      {
                        "type": "call",
                        "fun": "load_tissue_cfg",
                        "args": [
                          {
                            "type": "literal",
                            "value": "config/tissue.json"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "t0"
                  },
                  {
                    "type": "call",
                    "fun": "-",
                    "args": [
                      {
                        "type": "call",
                        "fun": "tail",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "win"
                              },
                              {
                                "type": "name",
                                "value": "times"
                              }
                            ]
                          },
                          {
                            "type": "literal",
                            "value": 1
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "name",
                            "value": "regimen"
                          },
                          {
                            "type": "name",
                            "value": "tau"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "idx"
                  },
                  {
                    "type": "call",
                    "fun": "which",
                    "args": [
                      {
                        "type": "call",
                        "fun": ">=",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "win"
                              },
                              {
                                "type": "name",
                                "value": "times"
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "-",
                            "args": [
                              {
                                "type": "name",
                                "value": "t0"
                              },
                              {
                                "type": "literal",
                                "value": 1e-09
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "t_iv"
                  },
                  {
                    "type": "call",
                    "fun": "[",
                    "args": [
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "name",
                            "value": "win"
                          },
                          {
                            "type": "name",
                            "value": "times"
                          }
                        ]
                      },
                      {
                        "type": "name",
                        "value": "idx"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "c_iv"
                  },
                  {
                    "type": "call",
                    "fun": "[",
                    "args": [
                      {
                        "type": "name",
                        "value": "conc"
                      },
                      {
                        "type": "name",
                        "value": "idx"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "ft"
                  },
                  {
                    "type": "call",
                    "fun": "mean",
                    "args": [
                      {
                        "type": "call",
                        "fun": ">",
                        "args": [
                          {
                            "type": "name",
                            "value": "c_iv"
                          },
                          {
                            "type": "name",
                            "value": "MIC"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "auc_tau"
                  },
                  {
                    "type": "call",
                    "fun": "sum",
                    "args": [
                      {
                        "type": "call",
                        "fun": "*",
                        "args": [
                          {
                            "type": "call",
                            "fun": "diff",
                            "args": [
                              {
                                "type": "name",
                                "value": "t_iv"
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": ["::", "zoo", "rollmean"],
                            "args": [
                              {
                                "type": "name",
                                "value": "c_iv"
                              },
                              {
                                "type": "literal",
                                "value": 2
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "auc24"
                  },
                  {
                    "type": "call",
                    "fun": "*",
                    "args": [
                      {
                        "type": "name",
                        "value": "auc_tau"
                      },
                      {
                        "type": "call",
                        "fun": "(",
                        "args": [
                          {
                            "type": "call",
                            "fun": "/",
                            "args": [
                              {
                                "type": "literal",
                                "value": 24
                              },
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "regimen"
                                  },
                                  {
                                    "type": "name",
                                    "value": "tau"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "cmax"
                  },
                  {
                    "type": "call",
                    "fun": "max",
                    "args": [
                      {
                        "type": "name",
                        "value": "c_iv"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "list",
                "args": {
                  "ft_gt_mic": {
                    "type": "name",
                    "value": "ft"
                  },
                  "auc_tau": {
                    "type": "name",
                    "value": "auc_tau"
                  },
                  "auc24": {
                    "type": "name",
                    "value": "auc24"
                  },
                  "auc24_over_mic": {
                    "type": "call",
                    "fun": "ifelse",
                    "args": [
                      {
                        "type": "call",
                        "fun": ">",
                        "args": [
                          {
                            "type": "name",
                            "value": "MIC"
                          },
                          {
                            "type": "literal",
                            "value": 0
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "/",
                        "args": [
                          {
                            "type": "name",
                            "value": "auc24"
                          },
                          {
                            "type": "name",
                            "value": "MIC"
                          }
                        ]
                      },
                      {
                        "type": "literal",
                        "value": "Inf"
                      }
                    ]
                  },
                  "cmax": {
                    "type": "name",
                    "value": "cmax"
                  },
                  "cmax_over_mic": {
                    "type": "call",
                    "fun": "ifelse",
                    "args": [
                      {
                        "type": "call",
                        "fun": ">",
                        "args": [
                          {
                            "type": "name",
                            "value": "MIC"
                          },
                          {
                            "type": "literal",
                            "value": 0
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "/",
                        "args": [
                          {
                            "type": "name",
                            "value": "cmax"
                          },
                          {
                            "type": "name",
                            "value": "MIC"
                          }
                        ]
                      },
                      {
                        "type": "literal",
                        "value": "Inf"
                      }
                    ]
                  }
                }
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "pta_parallel"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "", "", "", "", "NULL", "NULL", "TRUE"]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "==",
                    "args": [
                      {
                        "type": "call",
                        "fun": "nrow",
                        "args": [
                          {
                            "type": "name",
                            "value": "draws"
                          }
                        ]
                      },
                      {
                        "type": "literal",
                        "value": 0
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "return",
                    "args": [
                      {
                        "type": "literal",
                        "value": "NA"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "is.null",
                    "args": [
                      {
                        "type": "name",
                        "value": "n_cores"
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "n_cores"
                          },
                          {
                            "type": "call",
                            "fun": "get_optimal_workers",
                            "args": {
                              "task_type": {
                                "type": "literal",
                                "value": "cpu"
                              }
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "n_draws"
                  },
                  {
                    "type": "call",
                    "fun": "nrow",
                    "args": [
                      {
                        "type": "name",
                        "value": "draws"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "||",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<",
                        "args": [
                          {
                            "type": "name",
                            "value": "n_draws"
                          },
                          {
                            "type": "literal",
                            "value": 100
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "==",
                        "args": [
                          {
                            "type": "name",
                            "value": "n_cores"
                          },
                          {
                            "type": "literal",
                            "value": 1
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "ok"
                          },
                          {
                            "type": "call",
                            "fun": "vapply",
                            "args": [
                              {
                                "type": "call",
                                "fun": "seq_len",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "n_draws"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "function",
                                "args": [
                                  {
                                    "type": "pairlist",
                                    "value": ""
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "th"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "as.list",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "[",
                                                "args": {
                                                  "1": {
                                                    "type": "name",
                                                    "value": "draws"
                                                  },
                                                  "2": {
                                                    "type": "name",
                                                    "value": "i"
                                                  },
                                                  "3": {
                                                    "type": "name",
                                                    "value": ""
                                                  },
                                                  "drop": {
                                                    "type": "literal",
                                                    "value": false
                                                  }
                                                }
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "m"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "compute_metrics_for_draw",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "th"
                                              },
                                              {
                                                "type": "name",
                                                "value": "regimen"
                                              },
                                              {
                                                "type": "name",
                                                "value": "model_type"
                                              },
                                              {
                                                "type": "name",
                                                "value": "MIC"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "meets_target",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "m"
                                          },
                                          {
                                            "type": "name",
                                            "value": "target_def"
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "logical",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": 1
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "return",
                        "args": [
                          {
                            "type": "call",
                            "fun": "mean",
                            "args": [
                              {
                                "type": "name",
                                "value": "ok"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "is.null",
                    "args": [
                      {
                        "type": "name",
                        "value": "chunk_size"
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "chunk_size"
                          },
                          {
                            "type": "call",
                            "fun": "max",
                            "args": [
                              {
                                "type": "literal",
                                "value": 10
                              },
                              {
                                "type": "call",
                                "fun": "ceiling",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "/",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "n_draws"
                                      },
                                      {
                                        "type": "call",
                                        "fun": "(",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "*",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "n_cores"
                                              },
                                              {
                                                "type": "literal",
                                                "value": 4
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "chunks"
                  },
                  {
                    "type": "call",
                    "fun": "create_chunks",
                    "args": {
                      "1": {
                        "type": "name",
                        "value": "n_draws"
                      },
                      "2": {
                        "type": "name",
                        "value": "n_cores"
                      },
                      "min_chunk_size": {
                        "type": "name",
                        "value": "chunk_size"
                      }
                    }
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "&&",
                    "args": [
                      {
                        "type": "name",
                        "value": "progress"
                      },
                      {
                        "type": "call",
                        "fun": "requireNamespace",
                        "args": {
                          "1": {
                            "type": "literal",
                            "value": "progressr"
                          },
                          "quietly": {
                            "type": "literal",
                            "value": true
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "p"
                          },
                          {
                            "type": "call",
                            "fun": ["::", "progressr", "progressor"],
                            "args": {
                              "steps": {
                                "type": "call",
                                "fun": "length",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "chunks"
                                  }
                                ]
                              }
                            }
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "p"
                          },
                          {
                            "type": "call",
                            "fun": "function",
                            "args": [
                              {
                                "type": "pairlist",
                                "value": ""
                              },
                              {
                                "type": "call",
                                "fun": "invisible",
                                "args": [
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              },
                              {
                                "type": "NULL",
                                "value": []
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "==",
                    "args": [
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "name",
                            "value": ".Platform"
                          },
                          {
                            "type": "name",
                            "value": "OS.type"
                          }
                        ]
                      },
                      {
                        "type": "literal",
                        "value": "unix"
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "results"
                          },
                          {
                            "type": "call",
                            "fun": ["::", "parallel", "mclapply"],
                            "args": {
                              "1": {
                                "type": "name",
                                "value": "chunks"
                              },
                              "2": {
                                "type": "call",
                                "fun": "function",
                                "args": [
                                  {
                                    "type": "pairlist",
                                    "value": ""
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "chunk_results"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "logical",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "length",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "idx"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "for",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "j"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "seq_along",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "idx"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "{",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "i"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "[",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "idx"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "j"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "th"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "as.list",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "[",
                                                        "args": {
                                                          "1": {
                                                            "type": "name",
                                                            "value": "draws"
                                                          },
                                                          "2": {
                                                            "type": "name",
                                                            "value": "i"
                                                          },
                                                          "3": {
                                                            "type": "name",
                                                            "value": ""
                                                          },
                                                          "drop": {
                                                            "type": "literal",
                                                            "value": false
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "m"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "compute_metrics_for_draw",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "th"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "regimen"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "model_type"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "MIC"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "[",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "chunk_results"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "j"
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "meets_target",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "m"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "target_def"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "p",
                                        "args": {
                                          "message": {
                                            "type": "call",
                                            "fun": "sprintf",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": "Processed chunk with %d draws"
                                              },
                                              {
                                                "type": "call",
                                                "fun": "length",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "idx"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        }
                                      },
                                      {
                                        "type": "call",
                                        "fun": "return",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "chunk_results"
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              },
                              "mc.cores": {
                                "type": "name",
                                "value": "n_cores"
                              }
                            }
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "cl"
                          },
                          {
                            "type": "call",
                            "fun": ["::", "parallel", "makeCluster"],
                            "args": [
                              {
                                "type": "name",
                                "value": "n_cores"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "on.exit",
                        "args": [
                          {
                            "type": "call",
                            "fun": ["::", "parallel", "stopCluster"],
                            "args": [
                              {
                                "type": "name",
                                "value": "cl"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": ["::", "parallel", "clusterExport"],
                        "args": {
                          "1": {
                            "type": "name",
                            "value": "cl"
                          },
                          "2": {
                            "type": "call",
                            "fun": "c",
                            "args": [
                              {
                                "type": "literal",
                                "value": "compute_metrics_for_draw"
                              },
                              {
                                "type": "literal",
                                "value": "predict_conc_grid"
                              },
                              {
                                "type": "literal",
                                "value": "apply_site_penetration"
                              },
                              {
                                "type": "literal",
                                "value": "ss_window"
                              },
                              {
                                "type": "literal",
                                "value": "meets_target"
                              },
                              {
                                "type": "literal",
                                "value": "load_tissue_cfg"
                              }
                            ]
                          },
                          "envir": {
                            "type": "call",
                            "fun": "environment",
                            "args": []
                          }
                        }
                      },
                      {
                        "type": "call",
                        "fun": ["::", "parallel", "clusterExport"],
                        "args": {
                          "1": {
                            "type": "name",
                            "value": "cl"
                          },
                          "2": {
                            "type": "call",
                            "fun": "c",
                            "args": [
                              {
                                "type": "literal",
                                "value": "draws"
                              },
                              {
                                "type": "literal",
                                "value": "regimen"
                              },
                              {
                                "type": "literal",
                                "value": "model_type"
                              },
                              {
                                "type": "literal",
                                "value": "MIC"
                              }
                            ]
                          },
                          "envir": {
                            "type": "call",
                            "fun": "environment",
                            "args": []
                          }
                        }
                      },
                      {
                        "type": "call",
                        "fun": ["::", "parallel", "clusterEvalQ"],
                        "args": [
                          {
                            "type": "name",
                            "value": "cl"
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "if",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "requireNamespace",
                                    "args": {
                                      "1": {
                                        "type": "literal",
                                        "value": "zoo"
                                      },
                                      "quietly": {
                                        "type": "literal",
                                        "value": true
                                      }
                                    }
                                  },
                                  {
                                    "type": "call",
                                    "fun": "library",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "zoo"
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "if",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "requireNamespace",
                                    "args": {
                                      "1": {
                                        "type": "literal",
                                        "value": "deSolve"
                                      },
                                      "quietly": {
                                        "type": "literal",
                                        "value": true
                                      }
                                    }
                                  },
                                  {
                                    "type": "call",
                                    "fun": "library",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "deSolve"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "results"
                          },
                          {
                            "type": "call",
                            "fun": ["::", "parallel", "parLapply"],
                            "args": [
                              {
                                "type": "name",
                                "value": "cl"
                              },
                              {
                                "type": "name",
                                "value": "chunks"
                              },
                              {
                                "type": "call",
                                "fun": "function",
                                "args": [
                                  {
                                    "type": "pairlist",
                                    "value": ""
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "chunk_results"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "logical",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "length",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "idx"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "for",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "j"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "seq_along",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "idx"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "{",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "i"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "[",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "idx"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "j"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "th"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "as.list",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "[",
                                                        "args": {
                                                          "1": {
                                                            "type": "name",
                                                            "value": "draws"
                                                          },
                                                          "2": {
                                                            "type": "name",
                                                            "value": "i"
                                                          },
                                                          "3": {
                                                            "type": "name",
                                                            "value": ""
                                                          },
                                                          "drop": {
                                                            "type": "literal",
                                                            "value": false
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "m"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "compute_metrics_for_draw",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "th"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "regimen"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "model_type"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "MIC"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "[",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "chunk_results"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "j"
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "meets_target",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "m"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "target_def"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "return",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "chunk_results"
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "ok"
                  },
                  {
                    "type": "call",
                    "fun": "unlist",
                    "args": [
                      {
                        "type": "name",
                        "value": "results"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "return",
                "args": [
                  {
                    "type": "call",
                    "fun": "mean",
                    "args": [
                      {
                        "type": "name",
                        "value": "ok"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "cfr_parallel"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "", "", "", "", "NULL", "TRUE"]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "||",
                    "args": [
                      {
                        "type": "call",
                        "fun": "is.null",
                        "args": [
                          {
                            "type": "name",
                            "value": "mic_dist"
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "==",
                        "args": [
                          {
                            "type": "call",
                            "fun": "nrow",
                            "args": [
                              {
                                "type": "name",
                                "value": "mic_dist"
                              }
                            ]
                          },
                          {
                            "type": "literal",
                            "value": 0
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "return",
                    "args": [
                      {
                        "type": "literal",
                        "value": "NA"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "is.null",
                    "args": [
                      {
                        "type": "name",
                        "value": "n_cores"
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "n_cores"
                          },
                          {
                            "type": "call",
                            "fun": "get_optimal_workers",
                            "args": {
                              "task_type": {
                                "type": "literal",
                                "value": "cpu"
                              }
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "n_mics"
                  },
                  {
                    "type": "call",
                    "fun": "nrow",
                    "args": [
                      {
                        "type": "name",
                        "value": "mic_dist"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "&&",
                    "args": [
                      {
                        "type": "call",
                        "fun": "&&",
                        "args": [
                          {
                            "type": "name",
                            "value": "parallel_mic"
                          },
                          {
                            "type": "call",
                            "fun": ">",
                            "args": [
                              {
                                "type": "name",
                                "value": "n_mics"
                              },
                              {
                                "type": "literal",
                                "value": 1
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": ">",
                        "args": [
                          {
                            "type": "name",
                            "value": "n_cores"
                          },
                          {
                            "type": "literal",
                            "value": 1
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "if",
                        "args": [
                          {
                            "type": "call",
                            "fun": "==",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": ".Platform"
                                  },
                                  {
                                    "type": "name",
                                    "value": "OS.type"
                                  }
                                ]
                              },
                              {
                                "type": "literal",
                                "value": "unix"
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "<-",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "pta_vals"
                                  },
                                  {
                                    "type": "call",
                                    "fun": ["::", "parallel", "mclapply"],
                                    "args": {
                                      "1": {
                                        "type": "call",
                                        "fun": "seq_len",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "n_mics"
                                          }
                                        ]
                                      },
                                      "2": {
                                        "type": "call",
                                        "fun": "function",
                                        "args": [
                                          {
                                            "type": "pairlist",
                                            "value": ""
                                          },
                                          {
                                            "type": "call",
                                            "fun": "{",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "MIC"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "[",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "mic_dist"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "mic"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "i"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "pta_parallel",
                                                "args": {
                                                  "1": {
                                                    "type": "name",
                                                    "value": "draws"
                                                  },
                                                  "2": {
                                                    "type": "name",
                                                    "value": "regimen"
                                                  },
                                                  "3": {
                                                    "type": "name",
                                                    "value": "model_type"
                                                  },
                                                  "4": {
                                                    "type": "name",
                                                    "value": "target_def"
                                                  },
                                                  "5": {
                                                    "type": "name",
                                                    "value": "MIC"
                                                  },
                                                  "n_cores": {
                                                    "type": "literal",
                                                    "value": 1
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          {
                                            "type": "NULL",
                                            "value": []
                                          }
                                        ]
                                      },
                                      "mc.cores": {
                                        "type": "call",
                                        "fun": "min",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "n_cores"
                                          },
                                          {
                                            "type": "name",
                                            "value": "n_mics"
                                          }
                                        ]
                                      }
                                    }
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "<-",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "pta_vals"
                                  },
                                  {
                                    "type": "call",
                                    "fun": "unlist",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "pta_vals"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "<-",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "cl"
                                  },
                                  {
                                    "type": "call",
                                    "fun": ["::", "parallel", "makeCluster"],
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "min",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "n_cores"
                                          },
                                          {
                                            "type": "name",
                                            "value": "n_mics"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "on.exit",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": ["::", "parallel", "stopCluster"],
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "cl"
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": ["::", "parallel", "clusterExport"],
                                "args": {
                                  "1": {
                                    "type": "name",
                                    "value": "cl"
                                  },
                                  "2": {
                                    "type": "call",
                                    "fun": "c",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "pta_parallel"
                                      },
                                      {
                                        "type": "literal",
                                        "value": "draws"
                                      },
                                      {
                                        "type": "literal",
                                        "value": "regimen"
                                      },
                                      {
                                        "type": "literal",
                                        "value": "model_type"
                                      },
                                      {
                                        "type": "literal",
                                        "value": "target_def"
                                      }
                                    ]
                                  },
                                  "envir": {
                                    "type": "call",
                                    "fun": "environment",
                                    "args": []
                                  }
                                }
                              },
                              {
                                "type": "call",
                                "fun": "<-",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "pta_vals"
                                  },
                                  {
                                    "type": "call",
                                    "fun": ["::", "parallel", "parLapply"],
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "cl"
                                      },
                                      {
                                        "type": "call",
                                        "fun": "seq_len",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "n_mics"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "function",
                                        "args": [
                                          {
                                            "type": "pairlist",
                                            "value": ""
                                          },
                                          {
                                            "type": "call",
                                            "fun": "{",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "MIC"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "[",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "mic_dist"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "mic"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "i"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "pta_parallel",
                                                "args": {
                                                  "1": {
                                                    "type": "name",
                                                    "value": "draws"
                                                  },
                                                  "2": {
                                                    "type": "name",
                                                    "value": "regimen"
                                                  },
                                                  "3": {
                                                    "type": "name",
                                                    "value": "model_type"
                                                  },
                                                  "4": {
                                                    "type": "name",
                                                    "value": "target_def"
                                                  },
                                                  "5": {
                                                    "type": "name",
                                                    "value": "MIC"
                                                  },
                                                  "n_cores": {
                                                    "type": "literal",
                                                    "value": 1
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          {
                                            "type": "NULL",
                                            "value": []
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "<-",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "pta_vals"
                                  },
                                  {
                                    "type": "call",
                                    "fun": "unlist",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "pta_vals"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "pta_vals"
                          },
                          {
                            "type": "call",
                            "fun": "vapply",
                            "args": [
                              {
                                "type": "call",
                                "fun": "seq_len",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "n_mics"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "function",
                                "args": [
                                  {
                                    "type": "pairlist",
                                    "value": ""
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "MIC"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "[",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "$",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "mic_dist"
                                                  },
                                                  {
                                                    "type": "name",
                                                    "value": "mic"
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "name",
                                                "value": "i"
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "pta_parallel",
                                        "args": {
                                          "1": {
                                            "type": "name",
                                            "value": "draws"
                                          },
                                          "2": {
                                            "type": "name",
                                            "value": "regimen"
                                          },
                                          "3": {
                                            "type": "name",
                                            "value": "model_type"
                                          },
                                          "4": {
                                            "type": "name",
                                            "value": "target_def"
                                          },
                                          "5": {
                                            "type": "name",
                                            "value": "MIC"
                                          },
                                          "n_cores": {
                                            "type": "name",
                                            "value": "n_cores"
                                          }
                                        }
                                      }
                                    ]
                                  },
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "numeric",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": 1
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "cfr"
                  },
                  {
                    "type": "call",
                    "fun": "sum",
                    "args": [
                      {
                        "type": "call",
                        "fun": "*",
                        "args": [
                          {
                            "type": "name",
                            "value": "pta_vals"
                          },
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "mic_dist"
                              },
                              {
                                "type": "name",
                                "value": "p"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "return",
                "args": [
                  {
                    "type": "name",
                    "value": "cfr"
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "calculate_diagnostics_parallel"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "NULL"]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "!",
                    "args": [
                      {
                        "type": "call",
                        "fun": "requireNamespace",
                        "args": {
                          "1": {
                            "type": "literal",
                            "value": "posterior"
                          },
                          "quietly": {
                            "type": "literal",
                            "value": true
                          }
                        }
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "warning",
                        "args": [
                          {
                            "type": "literal",
                            "value": "Package 'posterior' required for diagnostics"
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "return",
                        "args": [
                          {
                            "type": "NULL",
                            "value": []
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "is.null",
                    "args": [
                      {
                        "type": "name",
                        "value": "n_cores"
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "n_cores"
                          },
                          {
                            "type": "call",
                            "fun": "get_optimal_workers",
                            "args": {
                              "task_type": {
                                "type": "literal",
                                "value": "cpu"
                              }
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "!",
                    "args": [
                      {
                        "type": "call",
                        "fun": "inherits",
                        "args": [
                          {
                            "type": "name",
                            "value": "draws"
                          },
                          {
                            "type": "literal",
                            "value": "draws"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "draws"
                          },
                          {
                            "type": "call",
                            "fun": ["::", "posterior", "as_draws_df"],
                            "args": [
                              {
                                "type": "name",
                                "value": "draws"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "variables"
                  },
                  {
                    "type": "call",
                    "fun": "[",
                    "args": [
                      {
                        "type": "call",
                        "fun": "names",
                        "args": [
                          {
                            "type": "name",
                            "value": "draws"
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "!",
                        "args": [
                          {
                            "type": "call",
                            "fun": "%in%",
                            "args": [
                              {
                                "type": "call",
                                "fun": "names",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "draws"
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "c",
                                "args": [
                                  {
                                    "type": "literal",
                                    "value": ".chain"
                                  },
                                  {
                                    "type": "literal",
                                    "value": ".iteration"
                                  },
                                  {
                                    "type": "literal",
                                    "value": ".draw"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "var_chunks"
                  },
                  {
                    "type": "call",
                    "fun": "split",
                    "args": [
                      {
                        "type": "name",
                        "value": "variables"
                      },
                      {
                        "type": "call",
                        "fun": "cut",
                        "args": {
                          "1": {
                            "type": "call",
                            "fun": "seq_along",
                            "args": [
                              {
                                "type": "name",
                                "value": "variables"
                              }
                            ]
                          },
                          "2": {
                            "type": "name",
                            "value": "n_cores"
                          },
                          "labels": {
                            "type": "literal",
                            "value": false
                          }
                        }
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "==",
                    "args": [
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "name",
                            "value": ".Platform"
                          },
                          {
                            "type": "name",
                            "value": "OS.type"
                          }
                        ]
                      },
                      {
                        "type": "literal",
                        "value": "unix"
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "diag_list"
                          },
                          {
                            "type": "call",
                            "fun": ["::", "parallel", "mclapply"],
                            "args": {
                              "1": {
                                "type": "name",
                                "value": "var_chunks"
                              },
                              "2": {
                                "type": "call",
                                "fun": "function",
                                "args": [
                                  {
                                    "type": "pairlist",
                                    "value": ""
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "subset_draws"
                                          },
                                          {
                                            "type": "call",
                                            "fun": ["::", "posterior", "subset_draws"],
                                            "args": {
                                              "1": {
                                                "type": "name",
                                                "value": "draws"
                                              },
                                              "variable": {
                                                "type": "name",
                                                "value": "vars"
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "list",
                                        "args": {
                                          "ess_bulk": {
                                            "type": "call",
                                            "fun": ["::", "posterior", "ess_bulk"],
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "subset_draws"
                                              }
                                            ]
                                          },
                                          "ess_tail": {
                                            "type": "call",
                                            "fun": ["::", "posterior", "ess_tail"],
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "subset_draws"
                                              }
                                            ]
                                          },
                                          "rhat": {
                                            "type": "call",
                                            "fun": ["::", "posterior", "rhat"],
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "subset_draws"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  },
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              },
                              "mc.cores": {
                                "type": "name",
                                "value": "n_cores"
                              }
                            }
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "cl"
                          },
                          {
                            "type": "call",
                            "fun": ["::", "parallel", "makeCluster"],
                            "args": [
                              {
                                "type": "name",
                                "value": "n_cores"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "on.exit",
                        "args": [
                          {
                            "type": "call",
                            "fun": ["::", "parallel", "stopCluster"],
                            "args": [
                              {
                                "type": "name",
                                "value": "cl"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": ["::", "parallel", "clusterExport"],
                        "args": {
                          "1": {
                            "type": "name",
                            "value": "cl"
                          },
                          "2": {
                            "type": "literal",
                            "value": "draws"
                          },
                          "envir": {
                            "type": "call",
                            "fun": "environment",
                            "args": []
                          }
                        }
                      },
                      {
                        "type": "call",
                        "fun": ["::", "parallel", "clusterEvalQ"],
                        "args": [
                          {
                            "type": "name",
                            "value": "cl"
                          },
                          {
                            "type": "call",
                            "fun": "library",
                            "args": [
                              {
                                "type": "name",
                                "value": "posterior"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "diag_list"
                          },
                          {
                            "type": "call",
                            "fun": ["::", "parallel", "parLapply"],
                            "args": [
                              {
                                "type": "name",
                                "value": "cl"
                              },
                              {
                                "type": "name",
                                "value": "var_chunks"
                              },
                              {
                                "type": "call",
                                "fun": "function",
                                "args": [
                                  {
                                    "type": "pairlist",
                                    "value": ""
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "subset_draws"
                                          },
                                          {
                                            "type": "call",
                                            "fun": ["::", "posterior", "subset_draws"],
                                            "args": {
                                              "1": {
                                                "type": "name",
                                                "value": "draws"
                                              },
                                              "variable": {
                                                "type": "name",
                                                "value": "vars"
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "list",
                                        "args": {
                                          "ess_bulk": {
                                            "type": "call",
                                            "fun": ["::", "posterior", "ess_bulk"],
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "subset_draws"
                                              }
                                            ]
                                          },
                                          "ess_tail": {
                                            "type": "call",
                                            "fun": ["::", "posterior", "ess_tail"],
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "subset_draws"
                                              }
                                            ]
                                          },
                                          "rhat": {
                                            "type": "call",
                                            "fun": ["::", "posterior", "rhat"],
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "subset_draws"
                                              }
                                            ]
                                          }
                                        }
                                      }
                                    ]
                                  },
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "diagnostics"
                  },
                  {
                    "type": "call",
                    "fun": "list",
                    "args": {
                      "ess_bulk": {
                        "type": "call",
                        "fun": "unlist",
                        "args": [
                          {
                            "type": "call",
                            "fun": "lapply",
                            "args": [
                              {
                                "type": "name",
                                "value": "diag_list"
                              },
                              {
                                "type": "call",
                                "fun": "function",
                                "args": [
                                  {
                                    "type": "pairlist",
                                    "value": ""
                                  },
                                  {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "x"
                                      },
                                      {
                                        "type": "name",
                                        "value": "ess_bulk"
                                      }
                                    ]
                                  },
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      "ess_tail": {
                        "type": "call",
                        "fun": "unlist",
                        "args": [
                          {
                            "type": "call",
                            "fun": "lapply",
                            "args": [
                              {
                                "type": "name",
                                "value": "diag_list"
                              },
                              {
                                "type": "call",
                                "fun": "function",
                                "args": [
                                  {
                                    "type": "pairlist",
                                    "value": ""
                                  },
                                  {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "x"
                                      },
                                      {
                                        "type": "name",
                                        "value": "ess_tail"
                                      }
                                    ]
                                  },
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      "rhat": {
                        "type": "call",
                        "fun": "unlist",
                        "args": [
                          {
                            "type": "call",
                            "fun": "lapply",
                            "args": [
                              {
                                "type": "name",
                                "value": "diag_list"
                              },
                              {
                                "type": "call",
                                "fun": "function",
                                "args": [
                                  {
                                    "type": "pairlist",
                                    "value": ""
                                  },
                                  {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "x"
                                      },
                                      {
                                        "type": "name",
                                        "value": "rhat"
                                      }
                                    ]
                                  },
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    }
                  }
                ]
              },
              {
                "type": "call",
                "fun": "return",
                "args": [
                  {
                    "type": "name",
                    "value": "diagnostics"
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "generate_ppc_parallel"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "", "", "100", "NULL"]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "is.null",
                    "args": [
                      {
                        "type": "name",
                        "value": "n_cores"
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "n_cores"
                          },
                          {
                            "type": "call",
                            "fun": "get_optimal_workers",
                            "args": {
                              "task_type": {
                                "type": "literal",
                                "value": "cpu"
                              }
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "n_draws"
                  },
                  {
                    "type": "call",
                    "fun": "nrow",
                    "args": [
                      {
                        "type": "name",
                        "value": "draws"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "<",
                    "args": [
                      {
                        "type": "name",
                        "value": "n_sim"
                      },
                      {
                        "type": "name",
                        "value": "n_draws"
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "sim_idx"
                          },
                          {
                            "type": "call",
                            "fun": "sample",
                            "args": [
                              {
                                "type": "name",
                                "value": "n_draws"
                              },
                              {
                                "type": "name",
                                "value": "n_sim"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "sim_idx"
                          },
                          {
                            "type": "call",
                            "fun": "seq_len",
                            "args": [
                              {
                                "type": "name",
                                "value": "n_draws"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "n_sim"
                          },
                          {
                            "type": "name",
                            "value": "n_draws"
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "chunks"
                  },
                  {
                    "type": "call",
                    "fun": "create_chunks",
                    "args": [
                      {
                        "type": "name",
                        "value": "n_sim"
                      },
                      {
                        "type": "name",
                        "value": "n_cores"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "time_grid"
                  },
                  {
                    "type": "call",
                    "fun": "seq",
                    "args": {
                      "1": {
                        "type": "literal",
                        "value": 0
                      },
                      "2": {
                        "type": "call",
                        "fun": "*",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "regimen"
                              },
                              {
                                "type": "name",
                                "value": "tau"
                              }
                            ]
                          },
                          {
                            "type": "literal",
                            "value": 6
                          }
                        ]
                      },
                      "by": {
                        "type": "literal",
                        "value": 0.5
                      }
                    }
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "==",
                    "args": [
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "name",
                            "value": ".Platform"
                          },
                          {
                            "type": "name",
                            "value": "OS.type"
                          }
                        ]
                      },
                      {
                        "type": "literal",
                        "value": "unix"
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "ppc_list"
                          },
                          {
                            "type": "call",
                            "fun": ["::", "parallel", "mclapply"],
                            "args": {
                              "1": {
                                "type": "name",
                                "value": "chunks"
                              },
                              "2": {
                                "type": "call",
                                "fun": "function",
                                "args": [
                                  {
                                    "type": "pairlist",
                                    "value": ""
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "ppc_chunk"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "matrix",
                                            "args": {
                                              "1": {
                                                "type": "literal",
                                                "value": null
                                              },
                                              "nrow": {
                                                "type": "call",
                                                "fun": "length",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "idx"
                                                  }
                                                ]
                                              },
                                              "ncol": {
                                                "type": "call",
                                                "fun": "length",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "time_grid"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "for",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "j"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "seq_along",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "idx"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "{",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "i"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "[",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "sim_idx"
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "[",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "idx"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "j"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "th"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "as.list",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "[",
                                                        "args": {
                                                          "1": {
                                                            "type": "name",
                                                            "value": "draws"
                                                          },
                                                          "2": {
                                                            "type": "name",
                                                            "value": "i"
                                                          },
                                                          "3": {
                                                            "type": "name",
                                                            "value": ""
                                                          },
                                                          "drop": {
                                                            "type": "literal",
                                                            "value": false
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "conc"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "predict_conc_grid",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "time_grid"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "regimen"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "th"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "model_type"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "sigma_add"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "%||%",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "th"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "sigma_add"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": 0.1
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "sigma_prop"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "%||%",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "th"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "sigma_prop"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": 0.1
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "error"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "rnorm",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "length",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "conc"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": 0
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "sqrt",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "+",
                                                            "args": [
                                                              {
                                                                "type": "call",
                                                                "fun": "^",
                                                                "args": [
                                                                  {
                                                                    "type": "name",
                                                                    "value": "sigma_add"
                                                                  },
                                                                  {
                                                                    "type": "literal",
                                                                    "value": 2
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "type": "call",
                                                                "fun": "^",
                                                                "args": [
                                                                  {
                                                                    "type": "call",
                                                                    "fun": "(",
                                                                    "args": [
                                                                      {
                                                                        "type": "call",
                                                                        "fun": "*",
                                                                        "args": [
                                                                          {
                                                                            "type": "name",
                                                                            "value": "sigma_prop"
                                                                          },
                                                                          {
                                                                            "type": "name",
                                                                            "value": "conc"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "type": "literal",
                                                                    "value": 2
                                                                  }
                                                                ]
                                                              }
                                                            ]
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "[",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "ppc_chunk"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "j"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": ""
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "pmax",
                                                    "args": [
                                                      {
                                                        "type": "literal",
                                                        "value": 0
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "+",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "conc"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "error"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "return",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "ppc_chunk"
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              },
                              "mc.cores": {
                                "type": "name",
                                "value": "n_cores"
                              }
                            }
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "cl"
                          },
                          {
                            "type": "call",
                            "fun": ["::", "parallel", "makeCluster"],
                            "args": [
                              {
                                "type": "name",
                                "value": "n_cores"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "on.exit",
                        "args": [
                          {
                            "type": "call",
                            "fun": ["::", "parallel", "stopCluster"],
                            "args": [
                              {
                                "type": "name",
                                "value": "cl"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": ["::", "parallel", "clusterExport"],
                        "args": {
                          "1": {
                            "type": "name",
                            "value": "cl"
                          },
                          "2": {
                            "type": "call",
                            "fun": "c",
                            "args": [
                              {
                                "type": "literal",
                                "value": "draws"
                              },
                              {
                                "type": "literal",
                                "value": "regimen"
                              },
                              {
                                "type": "literal",
                                "value": "model_type"
                              },
                              {
                                "type": "literal",
                                "value": "sim_idx"
                              },
                              {
                                "type": "literal",
                                "value": "time_grid"
                              },
                              {
                                "type": "literal",
                                "value": "predict_conc_grid"
                              }
                            ]
                          },
                          "envir": {
                            "type": "call",
                            "fun": "environment",
                            "args": []
                          }
                        }
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "ppc_list"
                          },
                          {
                            "type": "call",
                            "fun": ["::", "parallel", "parLapply"],
                            "args": [
                              {
                                "type": "name",
                                "value": "cl"
                              },
                              {
                                "type": "name",
                                "value": "chunks"
                              },
                              {
                                "type": "call",
                                "fun": "function",
                                "args": [
                                  {
                                    "type": "pairlist",
                                    "value": ""
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "<-",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "ppc_chunk"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "matrix",
                                            "args": {
                                              "1": {
                                                "type": "literal",
                                                "value": null
                                              },
                                              "nrow": {
                                                "type": "call",
                                                "fun": "length",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "idx"
                                                  }
                                                ]
                                              },
                                              "ncol": {
                                                "type": "call",
                                                "fun": "length",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "time_grid"
                                                  }
                                                ]
                                              }
                                            }
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "for",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "j"
                                          },
                                          {
                                            "type": "call",
                                            "fun": "seq_along",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "idx"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "call",
                                            "fun": "{",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "i"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "[",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "sim_idx"
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "[",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "idx"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "j"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "th"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "as.list",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "[",
                                                        "args": {
                                                          "1": {
                                                            "type": "name",
                                                            "value": "draws"
                                                          },
                                                          "2": {
                                                            "type": "name",
                                                            "value": "i"
                                                          },
                                                          "3": {
                                                            "type": "name",
                                                            "value": ""
                                                          },
                                                          "drop": {
                                                            "type": "literal",
                                                            "value": false
                                                          }
                                                        }
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "conc"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "predict_conc_grid",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "time_grid"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "regimen"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "th"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "model_type"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "sigma_add"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "%||%",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "th"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "sigma_add"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": 0.1
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "sigma_prop"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "%||%",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "$",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "th"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "sigma_prop"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": 0.1
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "error"
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "rnorm",
                                                    "args": [
                                                      {
                                                        "type": "call",
                                                        "fun": "length",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "conc"
                                                          }
                                                        ]
                                                      },
                                                      {
                                                        "type": "literal",
                                                        "value": 0
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "sqrt",
                                                        "args": [
                                                          {
                                                            "type": "call",
                                                            "fun": "+",
                                                            "args": [
                                                              {
                                                                "type": "call",
                                                                "fun": "^",
                                                                "args": [
                                                                  {
                                                                    "type": "name",
                                                                    "value": "sigma_add"
                                                                  },
                                                                  {
                                                                    "type": "literal",
                                                                    "value": 2
                                                                  }
                                                                ]
                                                              },
                                                              {
                                                                "type": "call",
                                                                "fun": "^",
                                                                "args": [
                                                                  {
                                                                    "type": "call",
                                                                    "fun": "(",
                                                                    "args": [
                                                                      {
                                                                        "type": "call",
                                                                        "fun": "*",
                                                                        "args": [
                                                                          {
                                                                            "type": "name",
                                                                            "value": "sigma_prop"
                                                                          },
                                                                          {
                                                                            "type": "name",
                                                                            "value": "conc"
                                                                          }
                                                                        ]
                                                                      }
                                                                    ]
                                                                  },
                                                                  {
                                                                    "type": "literal",
                                                                    "value": 2
                                                                  }
                                                                ]
                                                              }
                                                            ]
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              },
                                              {
                                                "type": "call",
                                                "fun": "<-",
                                                "args": [
                                                  {
                                                    "type": "call",
                                                    "fun": "[",
                                                    "args": [
                                                      {
                                                        "type": "name",
                                                        "value": "ppc_chunk"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": "j"
                                                      },
                                                      {
                                                        "type": "name",
                                                        "value": ""
                                                      }
                                                    ]
                                                  },
                                                  {
                                                    "type": "call",
                                                    "fun": "pmax",
                                                    "args": [
                                                      {
                                                        "type": "literal",
                                                        "value": 0
                                                      },
                                                      {
                                                        "type": "call",
                                                        "fun": "+",
                                                        "args": [
                                                          {
                                                            "type": "name",
                                                            "value": "conc"
                                                          },
                                                          {
                                                            "type": "name",
                                                            "value": "error"
                                                          }
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "return",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "ppc_chunk"
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "ppc_matrix"
                  },
                  {
                    "type": "call",
                    "fun": "do.call",
                    "args": [
                      {
                        "type": "name",
                        "value": "rbind"
                      },
                      {
                        "type": "name",
                        "value": "ppc_list"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "call",
                    "fun": "colnames",
                    "args": [
                      {
                        "type": "name",
                        "value": "ppc_matrix"
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "paste0",
                    "args": [
                      {
                        "type": "literal",
                        "value": "t_"
                      },
                      {
                        "type": "name",
                        "value": "time_grid"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "return",
                "args": [
                  {
                    "type": "name",
                    "value": "ppc_matrix"
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "pta_batch_parallel"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "", "", "", "", "NULL", "TRUE"]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "is.null",
                    "args": [
                      {
                        "type": "name",
                        "value": "n_cores"
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "n_cores"
                          },
                          {
                            "type": "call",
                            "fun": "get_optimal_workers",
                            "args": {
                              "task_type": {
                                "type": "literal",
                                "value": "memory"
                              }
                            }
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "n_regimens"
                  },
                  {
                    "type": "call",
                    "fun": "length",
                    "args": [
                      {
                        "type": "name",
                        "value": "regimens_list"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "&&",
                    "args": [
                      {
                        "type": "name",
                        "value": "load_balance"
                      },
                      {
                        "type": "call",
                        "fun": ">",
                        "args": [
                          {
                            "type": "name",
                            "value": "n_cores"
                          },
                          {
                            "type": "literal",
                            "value": 1
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "results"
                          },
                          {
                            "type": "call",
                            "fun": "parallel_load_balanced",
                            "args": {
                              "tasks": {
                                "type": "name",
                                "value": "regimens_list"
                              },
                              "worker_fun": {
                                "type": "call",
                                "fun": "function",
                                "args": [
                                  {
                                    "type": "pairlist",
                                    "value": ""
                                  },
                                  {
                                    "type": "call",
                                    "fun": "{",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "pta_parallel",
                                        "args": {
                                          "1": {
                                            "type": "name",
                                            "value": "draws"
                                          },
                                          "2": {
                                            "type": "name",
                                            "value": "reg"
                                          },
                                          "3": {
                                            "type": "name",
                                            "value": "model_type"
                                          },
                                          "4": {
                                            "type": "name",
                                            "value": "target_def"
                                          },
                                          "5": {
                                            "type": "name",
                                            "value": "MIC"
                                          },
                                          "n_cores": {
                                            "type": "literal",
                                            "value": 1
                                          }
                                        }
                                      }
                                    ]
                                  },
                                  {
                                    "type": "NULL",
                                    "value": []
                                  }
                                ]
                              },
                              "n_cores": {
                                "type": "name",
                                "value": "n_cores"
                              }
                            }
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "return",
                        "args": [
                          {
                            "type": "call",
                            "fun": "unlist",
                            "args": [
                              {
                                "type": "name",
                                "value": "results"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "if",
                        "args": [
                          {
                            "type": "call",
                            "fun": "==",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": ".Platform"
                                  },
                                  {
                                    "type": "name",
                                    "value": "OS.type"
                                  }
                                ]
                              },
                              {
                                "type": "literal",
                                "value": "unix"
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "<-",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "results"
                                  },
                                  {
                                    "type": "call",
                                    "fun": ["::", "parallel", "mclapply"],
                                    "args": {
                                      "1": {
                                        "type": "name",
                                        "value": "regimens_list"
                                      },
                                      "2": {
                                        "type": "call",
                                        "fun": "function",
                                        "args": [
                                          {
                                            "type": "pairlist",
                                            "value": ""
                                          },
                                          {
                                            "type": "call",
                                            "fun": "{",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "pta_parallel",
                                                "args": {
                                                  "1": {
                                                    "type": "name",
                                                    "value": "draws"
                                                  },
                                                  "2": {
                                                    "type": "name",
                                                    "value": "reg"
                                                  },
                                                  "3": {
                                                    "type": "name",
                                                    "value": "model_type"
                                                  },
                                                  "4": {
                                                    "type": "name",
                                                    "value": "target_def"
                                                  },
                                                  "5": {
                                                    "type": "name",
                                                    "value": "MIC"
                                                  },
                                                  "n_cores": {
                                                    "type": "literal",
                                                    "value": 1
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          {
                                            "type": "NULL",
                                            "value": []
                                          }
                                        ]
                                      },
                                      "mc.cores": {
                                        "type": "call",
                                        "fun": "min",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "n_cores"
                                          },
                                          {
                                            "type": "name",
                                            "value": "n_regimens"
                                          }
                                        ]
                                      }
                                    }
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "<-",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "cl"
                                  },
                                  {
                                    "type": "call",
                                    "fun": ["::", "parallel", "makeCluster"],
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "min",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "n_cores"
                                          },
                                          {
                                            "type": "name",
                                            "value": "n_regimens"
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "on.exit",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": ["::", "parallel", "stopCluster"],
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "cl"
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": ["::", "parallel", "clusterExport"],
                                "args": {
                                  "1": {
                                    "type": "name",
                                    "value": "cl"
                                  },
                                  "2": {
                                    "type": "call",
                                    "fun": "c",
                                    "args": [
                                      {
                                        "type": "literal",
                                        "value": "pta_parallel"
                                      },
                                      {
                                        "type": "literal",
                                        "value": "draws"
                                      },
                                      {
                                        "type": "literal",
                                        "value": "model_type"
                                      },
                                      {
                                        "type": "literal",
                                        "value": "target_def"
                                      },
                                      {
                                        "type": "literal",
                                        "value": "MIC"
                                      }
                                    ]
                                  },
                                  "envir": {
                                    "type": "call",
                                    "fun": "environment",
                                    "args": []
                                  }
                                }
                              },
                              {
                                "type": "call",
                                "fun": "<-",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "results"
                                  },
                                  {
                                    "type": "call",
                                    "fun": ["::", "parallel", "parLapply"],
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "cl"
                                      },
                                      {
                                        "type": "name",
                                        "value": "regimens_list"
                                      },
                                      {
                                        "type": "call",
                                        "fun": "function",
                                        "args": [
                                          {
                                            "type": "pairlist",
                                            "value": ""
                                          },
                                          {
                                            "type": "call",
                                            "fun": "{",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "pta_parallel",
                                                "args": {
                                                  "1": {
                                                    "type": "name",
                                                    "value": "draws"
                                                  },
                                                  "2": {
                                                    "type": "name",
                                                    "value": "reg"
                                                  },
                                                  "3": {
                                                    "type": "name",
                                                    "value": "model_type"
                                                  },
                                                  "4": {
                                                    "type": "name",
                                                    "value": "target_def"
                                                  },
                                                  "5": {
                                                    "type": "name",
                                                    "value": "MIC"
                                                  },
                                                  "n_cores": {
                                                    "type": "literal",
                                                    "value": 1
                                                  }
                                                }
                                              }
                                            ]
                                          },
                                          {
                                            "type": "NULL",
                                            "value": []
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "return",
                        "args": [
                          {
                            "type": "call",
                            "fun": "unlist",
                            "args": [
                              {
                                "type": "name",
                                "value": "results"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "pta_for_regimen"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "", "", "", ""]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "n_cores"
                  },
                  {
                    "type": "call",
                    "fun": "getOption",
                    "args": [
                      {
                        "type": "literal",
                        "value": "tdmx_parallel_cores"
                      },
                      {
                        "type": "literal",
                        "value": 1
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "&&",
                    "args": [
                      {
                        "type": "call",
                        "fun": ">",
                        "args": [
                          {
                            "type": "name",
                            "value": "n_cores"
                          },
                          {
                            "type": "literal",
                            "value": 1
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": ">=",
                        "args": [
                          {
                            "type": "call",
                            "fun": "nrow",
                            "args": [
                              {
                                "type": "name",
                                "value": "draws"
                              }
                            ]
                          },
                          {
                            "type": "literal",
                            "value": 100
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "return",
                        "args": [
                          {
                            "type": "call",
                            "fun": "pta_parallel",
                            "args": [
                              {
                                "type": "name",
                                "value": "draws"
                              },
                              {
                                "type": "name",
                                "value": "regimen"
                              },
                              {
                                "type": "name",
                                "value": "model_type"
                              },
                              {
                                "type": "name",
                                "value": "target_def"
                              },
                              {
                                "type": "name",
                                "value": "MIC"
                              },
                              {
                                "type": "name",
                                "value": "n_cores"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "==",
                    "args": [
                      {
                        "type": "call",
                        "fun": "nrow",
                        "args": [
                          {
                            "type": "name",
                            "value": "draws"
                          }
                        ]
                      },
                      {
                        "type": "literal",
                        "value": 0
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "return",
                    "args": [
                      {
                        "type": "literal",
                        "value": "NA"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "ok"
                  },
                  {
                    "type": "call",
                    "fun": "vapply",
                    "args": [
                      {
                        "type": "call",
                        "fun": "seq_len",
                        "args": [
                          {
                            "type": "call",
                            "fun": "nrow",
                            "args": [
                              {
                                "type": "name",
                                "value": "draws"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "function",
                        "args": [
                          {
                            "type": "pairlist",
                            "value": ""
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "<-",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "th"
                                  },
                                  {
                                    "type": "call",
                                    "fun": "as.list",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "[",
                                        "args": {
                                          "1": {
                                            "type": "name",
                                            "value": "draws"
                                          },
                                          "2": {
                                            "type": "name",
                                            "value": "i"
                                          },
                                          "3": {
                                            "type": "name",
                                            "value": ""
                                          },
                                          "drop": {
                                            "type": "literal",
                                            "value": false
                                          }
                                        }
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "<-",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "m"
                                  },
                                  {
                                    "type": "call",
                                    "fun": "compute_metrics_for_draw",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "th"
                                      },
                                      {
                                        "type": "name",
                                        "value": "regimen"
                                      },
                                      {
                                        "type": "name",
                                        "value": "model_type"
                                      },
                                      {
                                        "type": "name",
                                        "value": "MIC"
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "meets_target",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "m"
                                  },
                                  {
                                    "type": "name",
                                    "value": "target_def"
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "NULL",
                            "value": []
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "logical",
                        "args": [
                          {
                            "type": "literal",
                            "value": 1
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "mean",
                "args": [
                  {
                    "type": "name",
                    "value": "ok"
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "cfr_for_regimen"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "", "", "", ""]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "n_cores"
                  },
                  {
                    "type": "call",
                    "fun": "getOption",
                    "args": [
                      {
                        "type": "literal",
                        "value": "tdmx_parallel_cores"
                      },
                      {
                        "type": "literal",
                        "value": 1
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "&&",
                    "args": [
                      {
                        "type": "call",
                        "fun": "&&",
                        "args": [
                          {
                            "type": "call",
                            "fun": ">",
                            "args": [
                              {
                                "type": "name",
                                "value": "n_cores"
                              },
                              {
                                "type": "literal",
                                "value": 1
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "!",
                            "args": [
                              {
                                "type": "call",
                                "fun": "is.null",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "mic_dist"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": ">",
                        "args": [
                          {
                            "type": "call",
                            "fun": "nrow",
                            "args": [
                              {
                                "type": "name",
                                "value": "mic_dist"
                              }
                            ]
                          },
                          {
                            "type": "literal",
                            "value": 1
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "return",
                        "args": [
                          {
                            "type": "call",
                            "fun": "cfr_parallel",
                            "args": [
                              {
                                "type": "name",
                                "value": "draws"
                              },
                              {
                                "type": "name",
                                "value": "regimen"
                              },
                              {
                                "type": "name",
                                "value": "model_type"
                              },
                              {
                                "type": "name",
                                "value": "target_def"
                              },
                              {
                                "type": "name",
                                "value": "mic_dist"
                              },
                              {
                                "type": "name",
                                "value": "n_cores"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "||",
                    "args": [
                      {
                        "type": "call",
                        "fun": "is.null",
                        "args": [
                          {
                            "type": "name",
                            "value": "mic_dist"
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "==",
                        "args": [
                          {
                            "type": "call",
                            "fun": "nrow",
                            "args": [
                              {
                                "type": "name",
                                "value": "mic_dist"
                              }
                            ]
                          },
                          {
                            "type": "literal",
                            "value": 0
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "return",
                    "args": [
                      {
                        "type": "literal",
                        "value": "NA"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "pta_vals"
                  },
                  {
                    "type": "call",
                    "fun": "vapply",
                    "args": [
                      {
                        "type": "call",
                        "fun": "seq_len",
                        "args": [
                          {
                            "type": "call",
                            "fun": "nrow",
                            "args": [
                              {
                                "type": "name",
                                "value": "mic_dist"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "function",
                        "args": [
                          {
                            "type": "pairlist",
                            "value": ""
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "<-",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "MIC"
                                  },
                                  {
                                    "type": "call",
                                    "fun": "[",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "$",
                                        "args": [
                                          {
                                            "type": "name",
                                            "value": "mic_dist"
                                          },
                                          {
                                            "type": "name",
                                            "value": "mic"
                                          }
                                        ]
                                      },
                                      {
                                        "type": "name",
                                        "value": "i"
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "pta_for_regimen",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "draws"
                                  },
                                  {
                                    "type": "name",
                                    "value": "regimen"
                                  },
                                  {
                                    "type": "name",
                                    "value": "model_type"
                                  },
                                  {
                                    "type": "name",
                                    "value": "target_def"
                                  },
                                  {
                                    "type": "name",
                                    "value": "MIC"
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "NULL",
                            "value": []
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "numeric",
                        "args": [
                          {
                            "type": "literal",
                            "value": 1
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "sum",
                "args": [
                  {
                    "type": "call",
                    "fun": "*",
                    "args": [
                      {
                        "type": "name",
                        "value": "pta_vals"
                      },
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "name",
                            "value": "mic_dist"
                          },
                          {
                            "type": "name",
                            "value": "p"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "parse_mic_distribution"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ""
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "||",
                    "args": [
                      {
                        "type": "call",
                        "fun": "is.null",
                        "args": [
                          {
                            "type": "name",
                            "value": "txt"
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "!",
                        "args": [
                          {
                            "type": "call",
                            "fun": "nzchar",
                            "args": [
                              {
                                "type": "name",
                                "value": "txt"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "return",
                    "args": [
                      {
                        "type": "NULL",
                        "value": []
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "parts"
                  },
                  {
                    "type": "call",
                    "fun": "unlist",
                    "args": [
                      {
                        "type": "call",
                        "fun": "strsplit",
                        "args": [
                          {
                            "type": "name",
                            "value": "txt"
                          },
                          {
                            "type": "literal",
                            "value": ","
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "vals"
                  },
                  {
                    "type": "call",
                    "fun": "t",
                    "args": [
                      {
                        "type": "call",
                        "fun": "sapply",
                        "args": [
                          {
                            "type": "name",
                            "value": "parts"
                          },
                          {
                            "type": "call",
                            "fun": "function",
                            "args": [
                              {
                                "type": "pairlist",
                                "value": ""
                              },
                              {
                                "type": "call",
                                "fun": "{",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "<-",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "kv"
                                      },
                                      {
                                        "type": "call",
                                        "fun": "trimws",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "unlist",
                                            "args": [
                                              {
                                                "type": "call",
                                                "fun": "strsplit",
                                                "args": [
                                                  {
                                                    "type": "name",
                                                    "value": "p"
                                                  },
                                                  {
                                                    "type": "literal",
                                                    "value": ":"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "call",
                                    "fun": "if",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "!=",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "length",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "kv"
                                              }
                                            ]
                                          },
                                          {
                                            "type": "literal",
                                            "value": 2
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "return",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "c",
                                            "args": [
                                              {
                                                "type": "literal",
                                                "value": null
                                              },
                                              {
                                                "type": "literal",
                                                "value": null
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "type": "call",
                                    "fun": "c",
                                    "args": [
                                      {
                                        "type": "call",
                                        "fun": "as.numeric",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "[",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "kv"
                                              },
                                              {
                                                "type": "literal",
                                                "value": 1
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "type": "call",
                                        "fun": "as.numeric",
                                        "args": [
                                          {
                                            "type": "call",
                                            "fun": "[",
                                            "args": [
                                              {
                                                "type": "name",
                                                "value": "kv"
                                              },
                                              {
                                                "type": "literal",
                                                "value": 2
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "NULL",
                                "value": []
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "is.null",
                    "args": [
                      {
                        "type": "call",
                        "fun": "dim",
                        "args": [
                          {
                            "type": "name",
                            "value": "vals"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "return",
                    "args": [
                      {
                        "type": "NULL",
                        "value": []
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "df"
                  },
                  {
                    "type": "call",
                    "fun": "data.frame",
                    "args": {
                      "mic": {
                        "type": "call",
                        "fun": "as.numeric",
                        "args": [
                          {
                            "type": "call",
                            "fun": "[",
                            "args": [
                              {
                                "type": "name",
                                "value": "vals"
                              },
                              {
                                "type": "name",
                                "value": ""
                              },
                              {
                                "type": "literal",
                                "value": 1
                              }
                            ]
                          }
                        ]
                      },
                      "p": {
                        "type": "call",
                        "fun": "as.numeric",
                        "args": [
                          {
                            "type": "call",
                            "fun": "[",
                            "args": [
                              {
                                "type": "name",
                                "value": "vals"
                              },
                              {
                                "type": "name",
                                "value": ""
                              },
                              {
                                "type": "literal",
                                "value": 2
                              }
                            ]
                          }
                        ]
                      }
                    }
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "name",
                    "value": "df"
                  },
                  {
                    "type": "call",
                    "fun": "[",
                    "args": {
                      "1": {
                        "type": "name",
                        "value": "df"
                      },
                      "2": {
                        "type": "call",
                        "fun": "&",
                        "args": [
                          {
                            "type": "call",
                            "fun": "&",
                            "args": [
                              {
                                "type": "call",
                                "fun": "is.finite",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "df"
                                      },
                                      {
                                        "type": "name",
                                        "value": "mic"
                                      }
                                    ]
                                  }
                                ]
                              },
                              {
                                "type": "call",
                                "fun": "is.finite",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "$",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": "df"
                                      },
                                      {
                                        "type": "name",
                                        "value": "p"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": ">=",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "df"
                                  },
                                  {
                                    "type": "name",
                                    "value": "p"
                                  }
                                ]
                              },
                              {
                                "type": "literal",
                                "value": 0
                              }
                            ]
                          }
                        ]
                      },
                      "3": {
                        "type": "name",
                        "value": ""
                      },
                      "drop": {
                        "type": "literal",
                        "value": false
                      }
                    }
                  }
                ]
              },
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "==",
                    "args": [
                      {
                        "type": "call",
                        "fun": "nrow",
                        "args": [
                          {
                            "type": "name",
                            "value": "df"
                          }
                        ]
                      },
                      {
                        "type": "literal",
                        "value": 0
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "return",
                    "args": [
                      {
                        "type": "NULL",
                        "value": []
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "<-",
                "args": [
                  {
                    "type": "call",
                    "fun": "$",
                    "args": [
                      {
                        "type": "name",
                        "value": "df"
                      },
                      {
                        "type": "name",
                        "value": "p"
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "/",
                    "args": [
                      {
                        "type": "call",
                        "fun": "$",
                        "args": [
                          {
                            "type": "name",
                            "value": "df"
                          },
                          {
                            "type": "name",
                            "value": "p"
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "sum",
                        "args": [
                          {
                            "type": "call",
                            "fun": "$",
                            "args": [
                              {
                                "type": "name",
                                "value": "df"
                              },
                              {
                                "type": "name",
                                "value": "p"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "name",
                "value": "df"
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "pta_vs_dose_grid"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "", "", "", "", ""]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "vapply",
                "args": [
                  {
                    "type": "name",
                    "value": "doses"
                  },
                  {
                    "type": "call",
                    "fun": "function",
                    "args": [
                      {
                        "type": "pairlist",
                        "value": ""
                      },
                      {
                        "type": "call",
                        "fun": "{",
                        "args": [
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "name",
                                "value": "reg"
                              },
                              {
                                "type": "name",
                                "value": "regimen"
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "<-",
                            "args": [
                              {
                                "type": "call",
                                "fun": "$",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "reg"
                                  },
                                  {
                                    "type": "name",
                                    "value": "dose"
                                  }
                                ]
                              },
                              {
                                "type": "name",
                                "value": "d"
                              }
                            ]
                          },
                          {
                            "type": "call",
                            "fun": "pta_for_regimen",
                            "args": [
                              {
                                "type": "name",
                                "value": "draws"
                              },
                              {
                                "type": "name",
                                "value": "reg"
                              },
                              {
                                "type": "name",
                                "value": "model_type"
                              },
                              {
                                "type": "name",
                                "value": "target_def"
                              },
                              {
                                "type": "name",
                                "value": "MIC"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "NULL",
                        "value": []
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "numeric",
                    "args": [
                      {
                        "type": "literal",
                        "value": 1
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": ".pta_cache"
      },
      {
        "type": "call",
        "fun": "new.env",
        "args": {
          "parent": {
            "type": "call",
            "fun": "emptyenv",
            "args": []
          }
        }
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "pta_for_regimen_cached"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["", "", "", "", ""]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "requireNamespace",
                    "args": {
                      "1": {
                        "type": "literal",
                        "value": "digest"
                      },
                      "quietly": {
                        "type": "literal",
                        "value": true
                      }
                    }
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "key"
                          },
                          {
                            "type": "call",
                            "fun": ["::", "digest", "digest"],
                            "args": [
                              {
                                "type": "call",
                                "fun": "list",
                                "args": [
                                  {
                                    "type": "name",
                                    "value": "draws"
                                  },
                                  {
                                    "type": "name",
                                    "value": "regimen"
                                  },
                                  {
                                    "type": "name",
                                    "value": "model_type"
                                  },
                                  {
                                    "type": "name",
                                    "value": "target_def"
                                  },
                                  {
                                    "type": "name",
                                    "value": "MIC"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "if",
                        "args": [
                          {
                            "type": "call",
                            "fun": "exists",
                            "args": {
                              "1": {
                                "type": "name",
                                "value": "key"
                              },
                              "envir": {
                                "type": "name",
                                "value": ".pta_cache"
                              }
                            }
                          },
                          {
                            "type": "call",
                            "fun": "{",
                            "args": [
                              {
                                "type": "call",
                                "fun": "return",
                                "args": [
                                  {
                                    "type": "call",
                                    "fun": "[[",
                                    "args": [
                                      {
                                        "type": "name",
                                        "value": ".pta_cache"
                                      },
                                      {
                                        "type": "name",
                                        "value": "key"
                                      }
                                    ]
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "result"
                          },
                          {
                            "type": "call",
                            "fun": "pta_for_regimen",
                            "args": [
                              {
                                "type": "name",
                                "value": "draws"
                              },
                              {
                                "type": "name",
                                "value": "regimen"
                              },
                              {
                                "type": "name",
                                "value": "model_type"
                              },
                              {
                                "type": "name",
                                "value": "target_def"
                              },
                              {
                                "type": "name",
                                "value": "MIC"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "call",
                            "fun": "[[",
                            "args": [
                              {
                                "type": "name",
                                "value": ".pta_cache"
                              },
                              {
                                "type": "name",
                                "value": "key"
                              }
                            ]
                          },
                          {
                            "type": "name",
                            "value": "result"
                          }
                        ]
                      },
                      {
                        "type": "call",
                        "fun": "return",
                        "args": [
                          {
                            "type": "name",
                            "value": "result"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "return",
                        "args": [
                          {
                            "type": "call",
                            "fun": "pta_for_regimen",
                            "args": [
                              {
                                "type": "name",
                                "value": "draws"
                              },
                              {
                                "type": "name",
                                "value": "regimen"
                              },
                              {
                                "type": "name",
                                "value": "model_type"
                              },
                              {
                                "type": "name",
                                "value": "target_def"
                              },
                              {
                                "type": "name",
                                "value": "MIC"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "clear_pta_cache"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "NULL",
            "value": []
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "rm",
                "args": {
                  "list": {
                    "type": "call",
                    "fun": "ls",
                    "args": {
                      "envir": {
                        "type": "name",
                        "value": ".pta_cache"
                      }
                    }
                  },
                  "envir": {
                    "type": "name",
                    "value": ".pta_cache"
                  }
                }
              },
              {
                "type": "call",
                "fun": "gc",
                "args": {
                  "verbose": {
                    "type": "literal",
                    "value": false
                  }
                }
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "<-",
    "args": [
      {
        "type": "name",
        "value": "configure_pta_parallel"
      },
      {
        "type": "call",
        "fun": "function",
        "args": [
          {
            "type": "pairlist",
            "value": ["NULL", "NULL", "TRUE"]
          },
          {
            "type": "call",
            "fun": "{",
            "args": [
              {
                "type": "call",
                "fun": "if",
                "args": [
                  {
                    "type": "call",
                    "fun": "is.null",
                    "args": [
                      {
                        "type": "name",
                        "value": "n_cores"
                      }
                    ]
                  },
                  {
                    "type": "call",
                    "fun": "{",
                    "args": [
                      {
                        "type": "call",
                        "fun": "<-",
                        "args": [
                          {
                            "type": "name",
                            "value": "n_cores"
                          },
                          {
                            "type": "call",
                            "fun": "get_optimal_workers",
                            "args": []
                          }
                        ]
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "options",
                "args": {
                  "tdmx_parallel_cores": {
                    "type": "name",
                    "value": "n_cores"
                  },
                  "tdmx_pta_chunk_size": {
                    "type": "name",
                    "value": "chunk_size"
                  },
                  "tdmx_pta_progress": {
                    "type": "name",
                    "value": "progress"
                  }
                }
              },
              {
                "type": "call",
                "fun": "message",
                "args": [
                  {
                    "type": "call",
                    "fun": "sprintf",
                    "args": [
                      {
                        "type": "literal",
                        "value": "PTA/CFR parallelization configured with %d cores"
                      },
                      {
                        "type": "name",
                        "value": "n_cores"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "call",
                "fun": "invisible",
                "args": [
                  {
                    "type": "call",
                    "fun": "list",
                    "args": {
                      "n_cores": {
                        "type": "name",
                        "value": "n_cores"
                      },
                      "chunk_size": {
                        "type": "name",
                        "value": "chunk_size"
                      },
                      "progress": {
                        "type": "name",
                        "value": "progress"
                      }
                    }
                  }
                ]
              }
            ]
          },
          {
            "type": "NULL",
            "value": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "if",
    "args": [
      {
        "type": "call",
        "fun": "exists",
        "args": [
          {
            "type": "literal",
            "value": "get_optimal_workers"
          }
        ]
      },
      {
        "type": "call",
        "fun": "{",
        "args": [
          {
            "type": "call",
            "fun": "configure_pta_parallel",
            "args": []
          }
        ]
      }
    ]
  },
  {
    "type": "call",
    "fun": "message",
    "args": [
      {
        "type": "literal",
        "value": "Parallelized PTA/CFR calculations loaded."
      }
    ]
  }
]
