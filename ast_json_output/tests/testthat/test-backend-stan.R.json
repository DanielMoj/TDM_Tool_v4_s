[
  {
    "type": "call",
    "fun": "test_that",
    "args": [
      {
        "type": "literal",
        "value": "Stan-Pathfinder produces draws quickly"
      },
      {
        "type": "call",
        "fun": "{",
        "args": [
          {
            "type": "call",
            "fun": "load_sources",
            "args": []
          },
          {
            "type": "call",
            "fun": "skip_if_no_cmdstan",
            "args": []
          },
          {
            "type": "call",
            "fun": "options",
            "args": {
              "tdmx_hmc": {
                "type": "call",
                "fun": "list",
                "args": {
                  "chains": {
                    "type": "literal",
                    "value": 2
                  },
                  "iter_warmup": {
                    "type": "literal",
                    "value": 200
                  },
                  "iter_sampling": {
                    "type": "literal",
                    "value": 200
                  },
                  "adapt_delta": {
                    "type": "literal",
                    "value": 0.9
                  },
                  "max_treedepth": {
                    "type": "literal",
                    "value": 10
                  }
                }
              }
            }
          },
          {
            "type": "call",
            "fun": "<-",
            "args": [
              {
                "type": "name",
                "value": "obs"
              },
              {
                "type": "call",
                "fun": "data.frame",
                "args": {
                  "time": {
                    "type": "call",
                    "fun": "c",
                    "args": [
                      {
                        "type": "literal",
                        "value": 2
                      },
                      {
                        "type": "literal",
                        "value": 6
                      },
                      {
                        "type": "literal",
                        "value": 7
                      }
                    ]
                  },
                  "conc": {
                    "type": "call",
                    "fun": "c",
                    "args": [
                      {
                        "type": "literal",
                        "value": 8
                      },
                      {
                        "type": "literal",
                        "value": 12
                      },
                      {
                        "type": "literal",
                        "value": 10
                      }
                    ]
                  }
                }
              }
            ]
          },
          {
            "type": "call",
            "fun": "<-",
            "args": [
              {
                "type": "name",
                "value": "reg"
              },
              {
                "type": "call",
                "fun": "list",
                "args": {
                  "dose": {
                    "type": "literal",
                    "value": 1000
                  },
                  "tau": {
                    "type": "literal",
                    "value": 8
                  },
                  "tinf": {
                    "type": "literal",
                    "value": 1
                  },
                  "n_doses": {
                    "type": "literal",
                    "value": 6
                  },
                  "start_time": {
                    "type": "literal",
                    "value": 0
                  }
                }
              }
            ]
          },
          {
            "type": "call",
            "fun": "<-",
            "args": [
              {
                "type": "name",
                "value": "pri"
              },
              {
                "type": "call",
                "fun": "list",
                "args": {
                  "theta": {
                    "type": "call",
                    "fun": "list",
                    "args": {
                      "CL": {
                        "type": "literal",
                        "value": 6
                      },
                      "Vc": {
                        "type": "literal",
                        "value": 30
                      }
                    }
                  },
                  "theta_log": {
                    "type": "call",
                    "fun": "list",
                    "args": {
                      "mu": {
                        "type": "call",
                        "fun": "list",
                        "args": {
                          "CL": {
                            "type": "call",
                            "fun": "log",
                            "args": [
                              {
                                "type": "literal",
                                "value": 6
                              }
                            ]
                          },
                          "Vc": {
                            "type": "call",
                            "fun": "log",
                            "args": [
                              {
                                "type": "literal",
                                "value": 30
                              }
                            ]
                          }
                        }
                      },
                      "sd": {
                        "type": "call",
                        "fun": "list",
                        "args": {
                          "CL": {
                            "type": "literal",
                            "value": 0.3
                          },
                          "Vc": {
                            "type": "literal",
                            "value": 0.3
                          }
                        }
                      }
                    }
                  }
                }
              }
            ]
          },
          {
            "type": "call",
            "fun": "<-",
            "args": [
              {
                "type": "name",
                "value": "res"
              },
              {
                "type": "call",
                "fun": "run_fit",
                "args": {
                  "obs": {
                    "type": "name",
                    "value": "obs"
                  },
                  "regimen": {
                    "type": "name",
                    "value": "reg"
                  },
                  "priors": {
                    "type": "name",
                    "value": "pri"
                  },
                  "model_type": {
                    "type": "literal",
                    "value": "1C"
                  },
                  "error_model": {
                    "type": "literal",
                    "value": 1
                  },
                  "covariates": {
                    "type": "call",
                    "fun": "list",
                    "args": []
                  },
                  "backend": {
                    "type": "literal",
                    "value": "Stan-Pathfinder"
                  },
                  "estimate_sigma": {
                    "type": "literal",
                    "value": true
                  },
                  "sigma_init": {
                    "type": "call",
                    "fun": "list",
                    "args": {
                      "add": {
                        "type": "literal",
                        "value": 1
                      },
                      "prop": {
                        "type": "literal",
                        "value": 0.1
                      }
                    }
                  },
                  "blq_lloq": {
                    "type": "literal",
                    "value": "NA"
                  },
                  "is_blq": {
                    "type": "NULL",
                    "value": []
                  },
                  "use_cache": {
                    "type": "literal",
                    "value": true
                  }
                }
              }
            ]
          },
          {
            "type": "call",
            "fun": "expect_true",
            "args": [
              {
                "type": "call",
                "fun": "is.data.frame",
                "args": [
                  {
                    "type": "call",
                    "fun": "$",
                    "args": [
                      {
                        "type": "name",
                        "value": "res"
                      },
                      {
                        "type": "name",
                        "value": "draws"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "call",
            "fun": "expect_gt",
            "args": [
              {
                "type": "call",
                "fun": "nrow",
                "args": [
                  {
                    "type": "call",
                    "fun": "$",
                    "args": [
                      {
                        "type": "name",
                        "value": "res"
                      },
                      {
                        "type": "name",
                        "value": "draws"
                      }
                    ]
                  }
                ]
              },
              {
                "type": "literal",
                "value": 10
              }
            ]
          }
        ]
      }
    ]
  }
]
